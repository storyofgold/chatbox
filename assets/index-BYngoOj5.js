(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Pt,xt;function Nt(){return{geminiUrl:Pt,vertexUrl:xt}}function Dt(n,e,t,i){var r,l;if(!(n!=null&&n.baseUrl)){const a=Nt();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:t:(l=a.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H{}function S(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(n,e,t){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const f=a.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[f])){const c=n[f];if(Array.isArray(t))for(let u=0;u<c.length;u++){const d=c[u];s(d,e.slice(l+1),t[u])}else for(const u of c)s(u,e.slice(l+1),t)}return}else if(a.endsWith("[0]")){const f=a.slice(0,-3);f in n||(n[f]=[{}]);const c=n[f];s(c[0],e.slice(l+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=t}function o(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const i=e[t];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in n){const l=n[r];return Array.isArray(l)?l.map(a=>o(a,e.slice(t+1))):void 0}else return}else n=n[i]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ge(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ne;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ne||(Ne={}));var De;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(De||(De={}));var q;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(q||(q={}));var we;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(we||(we={}));var Ue;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Ue||(Ue={}));var ke;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(ke||(ke={}));var Le;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Le||(Le={}));var Fe;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Fe||(Fe={}));var Ve;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ve||(Ve={}));var Ge;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ge||(Ge={}));var qe;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(qe||(qe={}));var Be;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Be||(Be={}));var He;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(He||(He={}));var Je;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Je||(Je={}));var $e;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($e||($e={}));var le;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(le||(le={}));var We;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(We||(We={}));var he;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(he||(he={}));var Ye;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ye||(Ye={}));var Ke;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ke||(Ke={}));var ze;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(ze||(ze={}));var Xe;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Xe||(Xe={}));var Qe;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Qe||(Qe={}));var Ze;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ze||(Ze={}));var be;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(be||(be={}));var Oe;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Oe||(Oe={}));var je;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(je||(je={}));var en;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(en||(en={}));var nn;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nn||(nn={}));var tn;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(tn||(tn={}));var on;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(on||(on={}));var sn;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(sn||(sn={}));var rn;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(rn||(rn={}));var ln;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(ln||(ln={}));var an;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(an||(an={}));var un;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(un||(un={}));var fn;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(fn||(fn={}));var cn;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(cn||(cn={}));var dn;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(dn||(dn={}));var pn;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(pn||(pn={}));var mn;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(mn||(mn={}));var gn;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(gn||(gn={}));var hn;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(hn||(hn={}));var yn;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(yn||(yn={}));var W;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(W||(W={}));class ye{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class j{get text(){var e,t,i,r,l,a,f,c;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const p=[];for(const m of(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)!==null&&c!==void 0?c:[]){for(const[g,h]of Object.entries(m))g!=="text"&&g!=="thought"&&(h!==null||h!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,t,i,r,l,a,f,c;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const p of(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)!==null&&c!==void 0?c:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,t,i,r,l,a,f,c;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)===null||c===void 0?void 0:c.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,t,i,r,l,a,f,c,u;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,t,i,r,l,a,f,c,u;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class Tn{}class Cn{}class wt{}class Ut{}class kt{}class Lt{}class vn{}class En{}class Sn{}class Ft{}class _n{}class An{}class In{}class Mn{}class Vt{}class Gt{}class qt{}class Rn{}class Bt{get text(){var e,t,i;let r="",l=!1;const a=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[c,u]of Object.entries(f))c!=="text"&&c!=="thought"&&u!==null&&a.push(c);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,i;let r="";const l=[];for(const a of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,c]of Object.entries(a))f!=="inlineData"&&c!==null&&l.push(f);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class ae{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const i=new ae;if(i.name=e.name,i.metadata=e.metadata,i.done=e.done,i.error=e.error,t){const r=e.response;if(r){const l=new _n,a=r.videos;l.generatedVideos=a==null?void 0:a.map(f=>({video:{uri:f.gcsUri,videoBytes:f.bytesBase64Encoded?ge(f.bytesBase64Encoded):void 0,mimeType:f.mimeType}})),l.raiMediaFilteredCount=r.raiMediaFilteredCount,l.raiMediaFilteredReasons=r.raiMediaFilteredReasons,i.response=l}}else{const r=e.response;if(r){const l=new _n,a=r.generateVideoResponse,f=a==null?void 0:a.generatedSamples;l.generatedVideos=f==null?void 0:f.map(c=>{const u=c.video;return{video:{uri:u==null?void 0:u.uri,videoBytes:u!=null&&u.encodedVideo?ge(u==null?void 0:u.encodedVideo):void 0,mimeType:c.encoding}}}),l.raiMediaFilteredCount=a==null?void 0:a.raiMediaFilteredCount,l.raiMediaFilteredReasons=a==null?void 0:a.raiMediaFilteredReasons,i.response=l}}return i}}class Ht{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function bn(n,e){const t=x(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function On(n){return Array.isArray(n)?n.map(e=>ue(e)):[ue(n)]}function ue(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function jn(n){const e=ue(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function et(n){const e=ue(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Pn(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function nt(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Pn(e)):[Pn(n)]}function Te(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function xn(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Nn(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function U(n){if(n==null)throw new Error("ContentUnion is required");return Te(n)?n:{role:"user",parts:nt(n)}}function tt(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=U(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=U(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>U(t)):[U(e)]}function L(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(xn(n)||Nn(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[U(n)]}const e=[],t=[],i=Te(n[0]);for(const r of n){const l=Te(r);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(xn(r)||Nn(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:nt(t)}),e}function Jt(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(q).includes(t[0].toUpperCase())?t[0].toUpperCase():q.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(q).includes(i.toUpperCase())?i.toUpperCase():q.TYPE_UNSPECIFIED})}}function Y(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Jt(n.type,e);for(const[a,f]of Object.entries(n))if(f!=null)if(a=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(q).includes(f.toUpperCase())?f.toUpperCase():q.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=Y(f);else if(i.includes(a)){const c=[];for(const u of f){if(u.type=="null"){e.nullable=!0;continue}c.push(Y(u))}e[a]=c}else if(r.includes(a)){const c={};for(const[u,d]of Object.entries(f))c[u]=Y(d);e[a]=c}else{if(a==="additionalProperties")continue;e[a]=f}return e}function Me(n){return Y(n)}function Re(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Pe(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function X(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Y(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Y(e.response));return n}function Q(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function $t(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function V(n,e){if(typeof e!="string")throw new Error("name must be a string");return $t(n,e,"cachedContents")}function ot(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function J(n){return ge(n)}function Wt(n){return n!=null&&typeof n=="object"&&"name"in n}function Yt(n){return n!=null&&typeof n=="object"&&"video"in n}function Kt(n){return n!=null&&typeof n=="object"&&"uri"in n}function it(n){var e;let t;if(Wt(n)&&(t=n.name),!(Kt(n)&&(t=n.uri,t===void 0))&&!(Yt(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function st(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function rt(n){for(const e of["models","tunedModels","publisherModels"])if(zt(n,e))return n[e];return[]}function zt(n,e){return n!==null&&typeof n=="object"&&e in n}function Xt(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Qt(n,e={}){const t=[],i=new Set;for(const r of n){const l=r.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const a=Xt(r,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function lt(n,e){if(typeof e!="string"&&!Array.isArray(e)){if(n&&n.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Zt(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Z(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function at(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bt(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ot(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function jt(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function eo(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],bt(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],Ot(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],jt(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function ut(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>eo(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function no(n){const e={},t=o(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const i=o(n,["default"]);i!=null&&s(e,["default"],i);const r=o(n,["description"]);r!=null&&s(e,["description"],r);const l=o(n,["enum"]);l!=null&&s(e,["enum"],l);const a=o(n,["example"]);a!=null&&s(e,["example"],a);const f=o(n,["format"]);f!=null&&s(e,["format"],f);const c=o(n,["items"]);c!=null&&s(e,["items"],c);const u=o(n,["maxItems"]);u!=null&&s(e,["maxItems"],u);const d=o(n,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=o(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=o(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=o(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=o(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=o(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const C=o(n,["minimum"]);C!=null&&s(e,["minimum"],C);const v=o(n,["nullable"]);v!=null&&s(e,["nullable"],v);const T=o(n,["pattern"]);T!=null&&s(e,["pattern"],T);const E=o(n,["properties"]);E!=null&&s(e,["properties"],E);const I=o(n,["propertyOrdering"]);I!=null&&s(e,["propertyOrdering"],I);const _=o(n,["required"]);_!=null&&s(e,["required"],_);const M=o(n,["title"]);M!=null&&s(e,["title"],M);const R=o(n,["type"]);return R!=null&&s(e,["type"],R),e}function to(n){const e={};if(o(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=o(n,["category"]);t!=null&&s(e,["category"],t);const i=o(n,["threshold"]);return i!=null&&s(e,["threshold"],i),e}function oo(n){const e={},t=o(n,["behavior"]);t!=null&&s(e,["behavior"],t);const i=o(n,["description"]);i!=null&&s(e,["description"],i);const r=o(n,["name"]);r!=null&&s(e,["name"],r);const l=o(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=o(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=o(n,["response"]);f!=null&&s(e,["response"],f);const c=o(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function io(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function so(n){const e={},t=o(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],io(t)),o(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function ro(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function lo(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],ro(t)),e}function ao(){return{}}function uo(n){const e={},t=o(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function fo(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>oo(u))),s(e,["functionDeclarations"],c)}if(o(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(n,["googleSearch"]);i!=null&&s(e,["googleSearch"],so(i));const r=o(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],lo(r)),o(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(n,["urlContext"])!=null&&s(e,["urlContext"],ao());const a=o(n,["computerUse"]);a!=null&&s(e,["computerUse"],uo(a));const f=o(n,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function co(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function po(n){const e={},t=o(n,["latitude"]);t!=null&&s(e,["latitude"],t);const i=o(n,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function mo(n){const e={},t=o(n,["latLng"]);t!=null&&s(e,["latLng"],po(t));const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function go(n){const e={},t=o(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],co(t));const i=o(n,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],mo(i)),e}function ho(n){const e={},t=o(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function ft(n){const e={},t=o(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],ho(t)),e}function yo(n){const e={},t=o(n,["speaker"]);t!=null&&s(e,["speaker"],t);const i=o(n,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],ft(i)),e}function To(n){const e={},t=o(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>yo(r))),s(e,["speakerVoiceConfigs"],i)}return e}function Co(n){const e={},t=o(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],ft(t));const i=o(n,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],To(i));const r=o(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function vo(n){const e={},t=o(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const i=o(n,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function Eo(n,e,t){const i={},r=o(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],ut(U(r)));const l=o(e,["temperature"]);l!=null&&s(i,["temperature"],l);const a=o(e,["topP"]);a!=null&&s(i,["topP"],a);const f=o(e,["topK"]);f!=null&&s(i,["topK"],f);const c=o(e,["candidateCount"]);c!=null&&s(i,["candidateCount"],c);const u=o(e,["maxOutputTokens"]);u!=null&&s(i,["maxOutputTokens"],u);const d=o(e,["stopSequences"]);d!=null&&s(i,["stopSequences"],d);const p=o(e,["responseLogprobs"]);p!=null&&s(i,["responseLogprobs"],p);const m=o(e,["logprobs"]);m!=null&&s(i,["logprobs"],m);const g=o(e,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const h=o(e,["frequencyPenalty"]);h!=null&&s(i,["frequencyPenalty"],h);const y=o(e,["seed"]);y!=null&&s(i,["seed"],y);const C=o(e,["responseMimeType"]);C!=null&&s(i,["responseMimeType"],C);const v=o(e,["responseSchema"]);v!=null&&s(i,["responseSchema"],no(Me(v)));const T=o(e,["responseJsonSchema"]);if(T!=null&&s(i,["responseJsonSchema"],T),o(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(o(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=o(e,["safetySettings"]);if(t!==void 0&&E!=null){let P=E;Array.isArray(P)&&(P=P.map(k=>to(k))),s(t,["safetySettings"],P)}const I=o(e,["tools"]);if(t!==void 0&&I!=null){let P=Q(I);Array.isArray(P)&&(P=P.map(k=>fo(X(k)))),s(t,["tools"],P)}const _=o(e,["toolConfig"]);if(t!==void 0&&_!=null&&s(t,["toolConfig"],go(_)),o(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=o(e,["cachedContent"]);t!==void 0&&M!=null&&s(t,["cachedContent"],V(n,M));const R=o(e,["responseModalities"]);R!=null&&s(i,["responseModalities"],R);const w=o(e,["mediaResolution"]);w!=null&&s(i,["mediaResolution"],w);const A=o(e,["speechConfig"]);if(A!=null&&s(i,["speechConfig"],Co(Re(A))),o(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=o(e,["thinkingConfig"]);return N!=null&&s(i,["thinkingConfig"],vo(N)),i}function So(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["request","model"],x(n,i));const r=o(e,["contents"]);if(r!=null){let a=L(r);Array.isArray(a)&&(a=a.map(f=>ut(f))),s(t,["request","contents"],a)}const l=o(e,["config"]);return l!=null&&s(t,["request","generationConfig"],Eo(n,l,t)),t}function _o(n,e){const t={};if(o(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(o(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(o(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=o(e,["fileName"]);i!=null&&s(t,["fileName"],i);const r=o(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>So(n,a))),s(t,["requests","requests"],l)}return t}function Ao(n,e){const t={},i=o(n,["displayName"]);if(e!==void 0&&i!=null&&s(e,["batch","displayName"],i),o(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Dn(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["src"]);r!=null&&s(t,["batch","inputConfig"],_o(n,lt(n,r)));const l=o(e,["config"]);return l!=null&&s(t,["config"],Ao(l,t)),t}function Io(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],Z(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Mo(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],Z(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ro(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);if(e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),o(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Po(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],Ro(t,e)),e}function xo(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],Z(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function No(n){const e={},t=o(n,["format"]);t!=null&&s(e,["instancesFormat"],t);const i=o(n,["gcsUri"]);i!=null&&s(e,["gcsSource","uris"],i);const r=o(n,["bigqueryUri"]);if(r!=null&&s(e,["bigquerySource","inputUri"],r),o(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(o(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Do(n){const e={},t=o(n,["format"]);t!=null&&s(e,["predictionsFormat"],t);const i=o(n,["gcsUri"]);i!=null&&s(e,["gcsDestination","outputUriPrefix"],i);const r=o(n,["bigqueryUri"]);if(r!=null&&s(e,["bigqueryDestination","outputUri"],r),o(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(o(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function wo(n,e){const t={},i=o(n,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);const r=o(n,["dest"]);return e!==void 0&&r!=null&&s(e,["outputConfig"],Do(Zt(r))),t}function Uo(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["model"],x(n,i));const r=o(e,["src"]);r!=null&&s(t,["inputConfig"],No(lt(n,r)));const l=o(e,["config"]);return l!=null&&s(t,["config"],wo(l,t)),t}function ko(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],Z(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Lo(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],Z(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Fo(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=o(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function Vo(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],Fo(t,e)),e}function Go(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],Z(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function qo(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Bo(n){const e={},t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Ho(n){const e={},t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Jo(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],qo(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],Bo(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],Ho(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function $o(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Jo(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Wo(n){const e={},t=o(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function Yo(n){const e={},t=o(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const i=o(n,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function Ko(n){const e={},t=o(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Yo(r))),s(e,["urlMetadata"],i)}return e}function zo(n){const e={},t=o(n,["content"]);t!=null&&s(e,["content"],$o(t));const i=o(n,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],Wo(i));const r=o(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=o(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=o(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Ko(a));const f=o(n,["avgLogprobs"]);f!=null&&s(e,["avgLogprobs"],f);const c=o(n,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const u=o(n,["index"]);u!=null&&s(e,["index"],u);const d=o(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=o(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Xo(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>zo(u))),s(e,["candidates"],c)}const r=o(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=o(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=o(n,["responseId"]);a!=null&&s(e,["responseId"],a);const f=o(n,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function ct(n){const e={},t=o(n,["details"]);t!=null&&s(e,["details"],t);const i=o(n,["code"]);i!=null&&s(e,["code"],i);const r=o(n,["message"]);return r!=null&&s(e,["message"],r),e}function Qo(n){const e={},t=o(n,["response"]);t!=null&&s(e,["response"],Xo(t));const i=o(n,["error"]);return i!=null&&s(e,["error"],ct(i)),e}function Zo(n){const e={},t=o(n,["responsesFile"]);t!=null&&s(e,["fileName"],t);const i=o(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>Qo(l))),s(e,["inlinedResponses"],r)}return e}function ie(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["metadata","displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["metadata","state"]);r!=null&&s(e,["state"],at(r));const l=o(n,["metadata","createTime"]);l!=null&&s(e,["createTime"],l);const a=o(n,["metadata","endTime"]);a!=null&&s(e,["endTime"],a);const f=o(n,["metadata","updateTime"]);f!=null&&s(e,["updateTime"],f);const c=o(n,["metadata","model"]);c!=null&&s(e,["model"],c);const u=o(n,["metadata","output"]);return u!=null&&s(e,["dest"],Zo(u)),e}function bo(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>ie(a))),s(e,["batchJobs"],l)}return e}function Oo(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["done"]);r!=null&&s(e,["done"],r);const l=o(n,["error"]);return l!=null&&s(e,["error"],ct(l)),e}function dt(n){const e={},t=o(n,["details"]);t!=null&&s(e,["details"],t);const i=o(n,["code"]);i!=null&&s(e,["code"],i);const r=o(n,["message"]);return r!=null&&s(e,["message"],r),e}function jo(n){const e={},t=o(n,["instancesFormat"]);t!=null&&s(e,["format"],t);const i=o(n,["gcsSource","uris"]);i!=null&&s(e,["gcsUri"],i);const r=o(n,["bigquerySource","inputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function ei(n){const e={},t=o(n,["predictionsFormat"]);t!=null&&s(e,["format"],t);const i=o(n,["gcsDestination","outputUriPrefix"]);i!=null&&s(e,["gcsUri"],i);const r=o(n,["bigqueryDestination","outputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function Ce(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["state"]);r!=null&&s(e,["state"],at(r));const l=o(n,["error"]);l!=null&&s(e,["error"],dt(l));const a=o(n,["createTime"]);a!=null&&s(e,["createTime"],a);const f=o(n,["startTime"]);f!=null&&s(e,["startTime"],f);const c=o(n,["endTime"]);c!=null&&s(e,["endTime"],c);const u=o(n,["updateTime"]);u!=null&&s(e,["updateTime"],u);const d=o(n,["model"]);d!=null&&s(e,["model"],d);const p=o(n,["inputConfig"]);p!=null&&s(e,["src"],jo(p));const m=o(n,["outputConfig"]);return m!=null&&s(e,["dest"],ei(m)),e}function ni(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ce(a))),s(e,["batchJobs"],l)}return e}function ti(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["done"]);r!=null&&s(e,["done"],r);const l=o(n,["error"]);return l!=null&&s(e,["error"],dt(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var B;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(B||(B={}));class ne{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oi extends H{constructor(e){super(),this.apiClient=e,this.create=async t=>{var i,r;if(this.apiClient.isVertexAI()){const a=Date.now().toString();if(Array.isArray(t.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(t.config=t.config||{},t.config.displayName===void 0&&(t.config.displayName="genaiBatchJob_${timestampStr}"),t.config.dest===void 0&&typeof t.src=="string")if(t.src.startsWith("gs://")&&t.src.endsWith(".jsonl"))t.config.dest=`${t.src.slice(0,-6)}/dest`;else if(t.src.startsWith("bq://"))t.config.dest=`${t.src}_dest_${a}`;else throw new Error("Unsupported source:"+t.src)}else if(Array.isArray(t.src)||typeof t.src!="string"&&t.src.inlinedRequests){let l="",a={};const f=Dn(this.apiClient,t);l=S("{model}:batchGenerateContent",f._url),a=f._query;const d=f.batch.inputConfig.requests,p=d.requests,m=[];for(const h of p){const y=h;if(y.systemInstruction){const C=y.systemInstruction;delete y.systemInstruction;const v=y.request;v.systemInstruction=C,y.request=v}m.push(y)}return d.requests=m,delete f.config,delete f._url,delete f._query,this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()).then(h=>ie(h))}return await this.createInternal(t)},this.list=async(t={})=>new ne(B.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}async createInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Uo(this.apiClient,e);return f=S("batchPredictionJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Ce(d))}else{const u=Dn(this.apiClient,e);return f=S("{model}:batchGenerateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>ie(d))}}async get(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=ko(this.apiClient,e);return f=S("batchPredictionJobs/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Ce(d))}else{const u=Io(this.apiClient,e);return f=S("batches/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>ie(d))}}async cancel(e){var t,i,r,l;let a="",f={};if(this.apiClient.isVertexAI()){const c=Lo(this.apiClient,e);a=S("batchPredictionJobs/{name}:cancel",c._url),f=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=Mo(this.apiClient,e);a=S("batches/{name}:cancel",c._url),f=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Vo(e);return f=S("batchPredictionJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=ni(d),m=new Rn;return Object.assign(m,p),m})}else{const u=Po(e);return f=S("batches",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=bo(d),m=new Rn;return Object.assign(m,p),m})}}async delete(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Go(this.apiClient,e);return f=S("batchPredictionJobs/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>ti(d))}else{const u=xo(this.apiClient,e);return f=S("batches/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>Oo(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ii(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function si(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function ri(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function li(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],ii(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],si(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],ri(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function wn(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>li(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function ai(n){const e={},t=o(n,["behavior"]);t!=null&&s(e,["behavior"],t);const i=o(n,["description"]);i!=null&&s(e,["description"],i);const r=o(n,["name"]);r!=null&&s(e,["name"],r);const l=o(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=o(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=o(n,["response"]);f!=null&&s(e,["response"],f);const c=o(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function ui(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function fi(n){const e={},t=o(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],ui(t)),o(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function ci(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function di(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],ci(t)),e}function pi(){return{}}function mi(n){const e={},t=o(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function gi(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>ai(u))),s(e,["functionDeclarations"],c)}if(o(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(n,["googleSearch"]);i!=null&&s(e,["googleSearch"],fi(i));const r=o(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],di(r)),o(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(n,["urlContext"])!=null&&s(e,["urlContext"],pi());const a=o(n,["computerUse"]);a!=null&&s(e,["computerUse"],mi(a));const f=o(n,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function hi(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function yi(n){const e={},t=o(n,["latitude"]);t!=null&&s(e,["latitude"],t);const i=o(n,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function Ti(n){const e={},t=o(n,["latLng"]);t!=null&&s(e,["latLng"],yi(t));const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Ci(n){const e={},t=o(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],hi(t));const i=o(n,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],Ti(i)),e}function vi(n,e){const t={},i=o(n,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const r=o(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=o(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=o(n,["contents"]);if(e!==void 0&&a!=null){let d=L(a);Array.isArray(d)&&(d=d.map(p=>wn(p))),s(e,["contents"],d)}const f=o(n,["systemInstruction"]);e!==void 0&&f!=null&&s(e,["systemInstruction"],wn(U(f)));const c=o(n,["tools"]);if(e!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(p=>gi(p))),s(e,["tools"],d)}const u=o(n,["toolConfig"]);if(e!==void 0&&u!=null&&s(e,["toolConfig"],Ci(u)),o(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Ei(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["model"],bn(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],vi(r,t)),t}function Si(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],V(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function _i(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],V(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ai(n,e){const t={},i=o(n,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const r=o(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function Ii(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],V(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],Ai(r,t)),t}function Mi(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Ri(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],Mi(t,e)),e}function Pi(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function xi(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["data"]);i!=null&&s(e,["data"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ni(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["fileUri"]);i!=null&&s(e,["fileUri"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Di(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Pi(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],xi(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],Ni(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function Un(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Di(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function wi(n){const e={};if(o(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=o(n,["description"]);t!=null&&s(e,["description"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=o(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=o(n,["response"]);a!=null&&s(e,["response"],a);const f=o(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function Ui(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function ki(n){const e={},t=o(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],Ui(t));const i=o(n,["excludeDomains"]);return i!=null&&s(e,["excludeDomains"],i),e}function Li(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Fi(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Li(t)),e}function Vi(n){const e={},t=o(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function Gi(n){const e={},t=o(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function qi(n){const e={},t=o(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],Gi(t));const i=o(n,["authType"]);i!=null&&s(e,["authType"],i);const r=o(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=o(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=o(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const f=o(n,["oidcConfig"]);return f!=null&&s(e,["oidcConfig"],f),e}function Bi(n){const e={},t=o(n,["authConfig"]);return t!=null&&s(e,["authConfig"],qi(t)),e}function Hi(){return{}}function Ji(n){const e={},t=o(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function $i(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>wi(m))),s(e,["functionDeclarations"],p)}const i=o(n,["retrieval"]);i!=null&&s(e,["retrieval"],i);const r=o(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],ki(r));const l=o(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Fi(l));const a=o(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],Vi(a));const f=o(n,["googleMaps"]);f!=null&&s(e,["googleMaps"],Bi(f)),o(n,["urlContext"])!=null&&s(e,["urlContext"],Hi());const u=o(n,["computerUse"]);u!=null&&s(e,["computerUse"],Ji(u));const d=o(n,["codeExecution"]);return d!=null&&s(e,["codeExecution"],d),e}function Wi(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Yi(n){const e={},t=o(n,["latitude"]);t!=null&&s(e,["latitude"],t);const i=o(n,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function Ki(n){const e={},t=o(n,["latLng"]);t!=null&&s(e,["latLng"],Yi(t));const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function zi(n){const e={},t=o(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Wi(t));const i=o(n,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],Ki(i)),e}function Xi(n,e){const t={},i=o(n,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const r=o(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=o(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=o(n,["contents"]);if(e!==void 0&&a!=null){let p=L(a);Array.isArray(p)&&(p=p.map(m=>Un(m))),s(e,["contents"],p)}const f=o(n,["systemInstruction"]);e!==void 0&&f!=null&&s(e,["systemInstruction"],Un(U(f)));const c=o(n,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>$i(m))),s(e,["tools"],p)}const u=o(n,["toolConfig"]);e!==void 0&&u!=null&&s(e,["toolConfig"],zi(u));const d=o(n,["kmsKeyName"]);return e!==void 0&&d!=null&&s(e,["encryption_spec","kmsKeyName"],d),t}function Qi(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["model"],bn(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],Xi(r,t)),t}function Zi(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],V(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function bi(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],V(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Oi(n,e){const t={},i=o(n,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const r=o(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function ji(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],V(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],Oi(r,t)),t}function es(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function ns(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],es(t,e)),e}function se(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["model"]);r!=null&&s(e,["model"],r);const l=o(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=o(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const f=o(n,["expireTime"]);f!=null&&s(e,["expireTime"],f);const c=o(n,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function ts(){return{}}function os(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>se(a))),s(e,["cachedContents"],l)}return e}function re(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["model"]);r!=null&&s(e,["model"],r);const l=o(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=o(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const f=o(n,["expireTime"]);f!=null&&s(e,["expireTime"],f);const c=o(n,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function is(){return{}}function ss(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>re(a))),s(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rs extends H{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ne(B.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Qi(this.apiClient,e);return f=S("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>re(d))}else{const u=Ei(this.apiClient,e);return f=S("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>se(d))}}async get(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Zi(this.apiClient,e);return f=S("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>re(d))}else{const u=Si(this.apiClient,e);return f=S("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>se(d))}}async delete(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=bi(this.apiClient,e);return f=S("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(()=>{const d=is(),p=new In;return Object.assign(p,d),p})}else{const u=_i(this.apiClient,e);return f=S("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(()=>{const d=ts(),p=new In;return Object.assign(p,d),p})}}async update(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=ji(this.apiClient,e);return f=S("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>re(d))}else{const u=Ii(this.apiClient,e);return f=S("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>se(d))}}async listInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=ns(e);return f=S("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=ss(d),m=new Mn;return Object.assign(m,p),m})}else{const u=Ri(e);return f=S("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=os(d),m=new Mn;return Object.assign(m,p),m})}}}function kn(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function D(n){return this instanceof D?(this.v=n,this):new D(n)}function K(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(g){return function(h){return Promise.resolve(h).then(g,p)}}function f(g,h){i[g]&&(r[g]=function(y){return new Promise(function(C,v){l.push([g,y,C,v])>1||c(g,y)})},h&&(r[g]=h(r[g])))}function c(g,h){try{u(i[g](h))}catch(y){m(l[0][3],y)}}function u(g){g.value instanceof D?Promise.resolve(g.value.v).then(d,p):m(l[0][2],g)}function d(g){c("next",g)}function p(g){c("throw",g)}function m(g,h){g(h),l.shift(),l.length&&c(l[0][0],l[0][1])}}function ee(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof kn=="function"?kn(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(a){return new Promise(function(f,c){a=n[l](a),r(f,c,a.done,a.value)})}}function r(l,a,f,c){Promise.resolve(c).then(function(u){l({value:u,done:f})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ls(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:pt(t)}function pt(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function as(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Ln(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let l=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),l&&!pt(n[i])&&(l=!1),i++;l?e.push(...r):e.pop()}return e}class us{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new fs(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class fs{constructor(e,t,i,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),as(l)}async sendMessage(e){var t;await this.sendPromise;const i=U(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,a,f;const c=await r,u=(a=(l=c.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,d=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];d!=null&&(m=(f=d.slice(p))!==null&&f!==void 0?f:[]);const g=u?[u]:[];this.recordHistory(i,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=U(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?Ln(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,r;return K(this,arguments,function*(){var a,f,c,u;const d=[];try{for(var p=!0,m=ee(e),g;g=yield D(m.next()),a=g.done,!a;p=!0){u=g.value,p=!1;const h=u;if(ls(h)){const y=(r=(i=h.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;y!==void 0&&d.push(y)}yield yield D(h)}}catch(h){f={error:h}}finally{try{!p&&!a&&(c=m.return)&&(yield D(c.call(m)))}finally{if(f)throw f.error}}this.recordHistory(t,d)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Ln(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fe extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,fe.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cs(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function ds(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],cs(t,e)),e}function ps(n){const e={},t=o(n,["details"]);t!=null&&s(e,["details"],t);const i=o(n,["message"]);i!=null&&s(e,["message"],i);const r=o(n,["code"]);return r!=null&&s(e,["code"],r),e}function ms(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=o(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=o(n,["createTime"]);a!=null&&s(e,["createTime"],a);const f=o(n,["expirationTime"]);f!=null&&s(e,["expirationTime"],f);const c=o(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=o(n,["sha256Hash"]);u!=null&&s(e,["sha256Hash"],u);const d=o(n,["uri"]);d!=null&&s(e,["uri"],d);const p=o(n,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=o(n,["state"]);m!=null&&s(e,["state"],m);const g=o(n,["source"]);g!=null&&s(e,["source"],g);const h=o(n,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const y=o(n,["error"]);return y!=null&&s(e,["error"],ps(y)),e}function gs(n){const e={},t=o(n,["file"]);t!=null&&s(e,["file"],ms(t));const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function hs(n){const e={},t=o(n,["name"]);t!=null&&s(e,["_url","file"],it(t));const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function ys(n){const e={},t=o(n,["name"]);t!=null&&s(e,["_url","file"],it(t));const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function Ts(n){const e={},t=o(n,["details"]);t!=null&&s(e,["details"],t);const i=o(n,["message"]);i!=null&&s(e,["message"],i);const r=o(n,["code"]);return r!=null&&s(e,["code"],r),e}function ve(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=o(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=o(n,["createTime"]);a!=null&&s(e,["createTime"],a);const f=o(n,["expirationTime"]);f!=null&&s(e,["expirationTime"],f);const c=o(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=o(n,["sha256Hash"]);u!=null&&s(e,["sha256Hash"],u);const d=o(n,["uri"]);d!=null&&s(e,["uri"],d);const p=o(n,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=o(n,["state"]);m!=null&&s(e,["state"],m);const g=o(n,["source"]);g!=null&&s(e,["source"],g);const h=o(n,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const y=o(n,["error"]);return y!=null&&s(e,["error"],Ts(y)),e}function Cs(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>ve(a))),s(e,["files"],l)}return e}function vs(n){const e={},t=o(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Es(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ss extends H{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ne(B.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>ve(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ds(e);return l=S("files",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>{const u=Cs(c),d=new Vt;return Object.assign(d,u),d})}}async createInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=gs(e);return l=S("upload/v1beta/files",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const u=vs(c),d=new Gt;return Object.assign(d,u),d})}}async get(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=hs(e);return l=S("files/{file}",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>ve(c))}}async delete(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ys(e);return l=S("files/{file}",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(()=>{const c=Es(),u=new qt;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _s(n){const e={},t=o(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function mt(n){const e={},t=o(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],_s(t)),e}function As(n){const e={},t=o(n,["speaker"]);t!=null&&s(e,["speaker"],t);const i=o(n,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],mt(i)),e}function Is(n){const e={},t=o(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>As(r))),s(e,["speakerVoiceConfigs"],i)}return e}function Ms(n){const e={},t=o(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],mt(t));const i=o(n,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],Is(i));const r=o(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Rs(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ps(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function xs(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Ns(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Rs(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],Ps(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],xs(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function Ds(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Ns(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function ws(n){const e={},t=o(n,["behavior"]);t!=null&&s(e,["behavior"],t);const i=o(n,["description"]);i!=null&&s(e,["description"],i);const r=o(n,["name"]);r!=null&&s(e,["name"],r);const l=o(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=o(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=o(n,["response"]);f!=null&&s(e,["response"],f);const c=o(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function Us(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function ks(n){const e={},t=o(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Us(t)),o(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Ls(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Fs(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Ls(t)),e}function Vs(){return{}}function Gs(n){const e={},t=o(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function qs(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>ws(u))),s(e,["functionDeclarations"],c)}if(o(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(n,["googleSearch"]);i!=null&&s(e,["googleSearch"],ks(i));const r=o(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Fs(r)),o(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(n,["urlContext"])!=null&&s(e,["urlContext"],Vs());const a=o(n,["computerUse"]);a!=null&&s(e,["computerUse"],Gs(a));const f=o(n,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function Bs(n){const e={},t=o(n,["handle"]);if(t!=null&&s(e,["handle"],t),o(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Fn(){return{}}function Hs(n){const e={},t=o(n,["disabled"]);t!=null&&s(e,["disabled"],t);const i=o(n,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);const r=o(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=o(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=o(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Js(n){const e={},t=o(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],Hs(t));const i=o(n,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);const r=o(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function $s(n){const e={},t=o(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function Ws(n){const e={},t=o(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const i=o(n,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],$s(i)),e}function Ys(n){const e={},t=o(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function Ks(n,e){const t={},i=o(n,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);const r=o(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=o(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=o(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const f=o(n,["topK"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","topK"],f);const c=o(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const u=o(n,["mediaResolution"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","mediaResolution"],u);const d=o(n,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=o(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Ms(Pe(p)));const m=o(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=o(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],Ds(U(g)));const h=o(n,["tools"]);if(e!==void 0&&h!=null){let _=Q(h);Array.isArray(_)&&(_=_.map(M=>qs(X(M)))),s(e,["setup","tools"],_)}const y=o(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],Bs(y));const C=o(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&s(e,["setup","inputAudioTranscription"],Fn());const v=o(n,["outputAudioTranscription"]);e!==void 0&&v!=null&&s(e,["setup","outputAudioTranscription"],Fn());const T=o(n,["realtimeInputConfig"]);e!==void 0&&T!=null&&s(e,["setup","realtimeInputConfig"],Js(T));const E=o(n,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],Ws(E));const I=o(n,["proactivity"]);return e!==void 0&&I!=null&&s(e,["setup","proactivity"],Ys(I)),t}function zs(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["setup","model"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],Ks(r,t)),t}function Xs(){return{}}function Qs(){return{}}function Zs(n){const e={},t=o(n,["media"]);t!=null&&s(e,["mediaChunks"],On(t));const i=o(n,["audio"]);i!=null&&s(e,["audio"],et(i));const r=o(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=o(n,["video"]);l!=null&&s(e,["video"],jn(l));const a=o(n,["text"]);return a!=null&&s(e,["text"],a),o(n,["activityStart"])!=null&&s(e,["activityStart"],Xs()),o(n,["activityEnd"])!=null&&s(e,["activityEnd"],Qs()),e}function gt(n){const e={},t=o(n,["text"]);t!=null&&s(e,["text"],t);const i=o(n,["weight"]);return i!=null&&s(e,["weight"],i),e}function bs(n){const e={},t=o(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>gt(r))),s(e,["weightedPrompts"],i)}return e}function ht(n){const e={},t=o(n,["temperature"]);t!=null&&s(e,["temperature"],t);const i=o(n,["topK"]);i!=null&&s(e,["topK"],i);const r=o(n,["seed"]);r!=null&&s(e,["seed"],r);const l=o(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=o(n,["bpm"]);a!=null&&s(e,["bpm"],a);const f=o(n,["density"]);f!=null&&s(e,["density"],f);const c=o(n,["brightness"]);c!=null&&s(e,["brightness"],c);const u=o(n,["scale"]);u!=null&&s(e,["scale"],u);const d=o(n,["muteBass"]);d!=null&&s(e,["muteBass"],d);const p=o(n,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=o(n,["onlyBassAndDrums"]);m!=null&&s(e,["onlyBassAndDrums"],m);const g=o(n,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function Os(n){const e={},t=o(n,["musicGenerationConfig"]);return t!=null&&s(e,["musicGenerationConfig"],ht(t)),e}function yt(n){const e={},t=o(n,["model"]);return t!=null&&s(e,["model"],t),e}function Tt(n){const e={},t=o(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>gt(r))),s(e,["weightedPrompts"],i)}return e}function Ee(n){const e={},t=o(n,["setup"]);t!=null&&s(e,["setup"],yt(t));const i=o(n,["clientContent"]);i!=null&&s(e,["clientContent"],Tt(i));const r=o(n,["musicGenerationConfig"]);r!=null&&s(e,["musicGenerationConfig"],ht(r));const l=o(n,["playbackControl"]);return l!=null&&s(e,["playbackControl"],l),e}function js(n){const e={},t=o(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function er(n){const e={},t=o(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],js(t)),e}function nr(n){const e={},t=o(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],er(t)),o(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function tr(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function or(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["data"]);i!=null&&s(e,["data"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ir(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["fileUri"]);i!=null&&s(e,["fileUri"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function sr(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],tr(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],or(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],ir(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function rr(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>sr(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function lr(n){const e={};if(o(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=o(n,["description"]);t!=null&&s(e,["description"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=o(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=o(n,["response"]);a!=null&&s(e,["response"],a);const f=o(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function ar(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function ur(n){const e={},t=o(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],ar(t));const i=o(n,["excludeDomains"]);return i!=null&&s(e,["excludeDomains"],i),e}function fr(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function cr(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],fr(t)),e}function dr(n){const e={},t=o(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function pr(n){const e={},t=o(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function mr(n){const e={},t=o(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],pr(t));const i=o(n,["authType"]);i!=null&&s(e,["authType"],i);const r=o(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=o(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=o(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const f=o(n,["oidcConfig"]);return f!=null&&s(e,["oidcConfig"],f),e}function gr(n){const e={},t=o(n,["authConfig"]);return t!=null&&s(e,["authConfig"],mr(t)),e}function hr(){return{}}function yr(n){const e={},t=o(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function Tr(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>lr(m))),s(e,["functionDeclarations"],p)}const i=o(n,["retrieval"]);i!=null&&s(e,["retrieval"],i);const r=o(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],ur(r));const l=o(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],cr(l));const a=o(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],dr(a));const f=o(n,["googleMaps"]);f!=null&&s(e,["googleMaps"],gr(f)),o(n,["urlContext"])!=null&&s(e,["urlContext"],hr());const u=o(n,["computerUse"]);u!=null&&s(e,["computerUse"],yr(u));const d=o(n,["codeExecution"]);return d!=null&&s(e,["codeExecution"],d),e}function Cr(n){const e={},t=o(n,["handle"]);t!=null&&s(e,["handle"],t);const i=o(n,["transparent"]);return i!=null&&s(e,["transparent"],i),e}function Vn(){return{}}function vr(n){const e={},t=o(n,["disabled"]);t!=null&&s(e,["disabled"],t);const i=o(n,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);const r=o(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=o(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=o(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Er(n){const e={},t=o(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],vr(t));const i=o(n,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);const r=o(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function Sr(n){const e={},t=o(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function _r(n){const e={},t=o(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const i=o(n,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],Sr(i)),e}function Ar(n){const e={},t=o(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function Ir(n,e){const t={},i=o(n,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);const r=o(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=o(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=o(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const f=o(n,["topK"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","topK"],f);const c=o(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const u=o(n,["mediaResolution"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","mediaResolution"],u);const d=o(n,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=o(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],nr(Pe(p)));const m=o(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=o(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],rr(U(g)));const h=o(n,["tools"]);if(e!==void 0&&h!=null){let _=Q(h);Array.isArray(_)&&(_=_.map(M=>Tr(X(M)))),s(e,["setup","tools"],_)}const y=o(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],Cr(y));const C=o(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&s(e,["setup","inputAudioTranscription"],Vn());const v=o(n,["outputAudioTranscription"]);e!==void 0&&v!=null&&s(e,["setup","outputAudioTranscription"],Vn());const T=o(n,["realtimeInputConfig"]);e!==void 0&&T!=null&&s(e,["setup","realtimeInputConfig"],Er(T));const E=o(n,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],_r(E));const I=o(n,["proactivity"]);return e!==void 0&&I!=null&&s(e,["setup","proactivity"],Ar(I)),t}function Mr(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["setup","model"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],Ir(r,t)),t}function Rr(){return{}}function Pr(){return{}}function xr(n){const e={},t=o(n,["media"]);t!=null&&s(e,["mediaChunks"],On(t));const i=o(n,["audio"]);i!=null&&s(e,["audio"],et(i));const r=o(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=o(n,["video"]);l!=null&&s(e,["video"],jn(l));const a=o(n,["text"]);return a!=null&&s(e,["text"],a),o(n,["activityStart"])!=null&&s(e,["activityStart"],Rr()),o(n,["activityEnd"])!=null&&s(e,["activityEnd"],Pr()),e}function Nr(){return{}}function Dr(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function wr(n){const e={},t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Ur(n){const e={},t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function kr(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Dr(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],wr(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],Ur(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function Lr(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>kr(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Gn(n){const e={},t=o(n,["text"]);t!=null&&s(e,["text"],t);const i=o(n,["finished"]);return i!=null&&s(e,["finished"],i),e}function Fr(n){const e={},t=o(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const i=o(n,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function Vr(n){const e={},t=o(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Fr(r))),s(e,["urlMetadata"],i)}return e}function Gr(n){const e={},t=o(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],Lr(t));const i=o(n,["turnComplete"]);i!=null&&s(e,["turnComplete"],i);const r=o(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=o(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=o(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const f=o(n,["inputTranscription"]);f!=null&&s(e,["inputTranscription"],Gn(f));const c=o(n,["outputTranscription"]);c!=null&&s(e,["outputTranscription"],Gn(c));const u=o(n,["urlContextMetadata"]);return u!=null&&s(e,["urlContextMetadata"],Vr(u)),e}function qr(n){const e={},t=o(n,["id"]);t!=null&&s(e,["id"],t);const i=o(n,["args"]);i!=null&&s(e,["args"],i);const r=o(n,["name"]);return r!=null&&s(e,["name"],r),e}function Br(n){const e={},t=o(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>qr(r))),s(e,["functionCalls"],i)}return e}function Hr(n){const e={},t=o(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function te(n){const e={},t=o(n,["modality"]);t!=null&&s(e,["modality"],t);const i=o(n,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function Jr(n){const e={},t=o(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const i=o(n,["cachedContentTokenCount"]);i!=null&&s(e,["cachedContentTokenCount"],i);const r=o(n,["responseTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=o(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=o(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const f=o(n,["totalTokenCount"]);f!=null&&s(e,["totalTokenCount"],f);const c=o(n,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>te(g))),s(e,["promptTokensDetails"],m)}const u=o(n,["cacheTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>te(g))),s(e,["cacheTokensDetails"],m)}const d=o(n,["responseTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>te(g))),s(e,["responseTokensDetails"],m)}const p=o(n,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>te(g))),s(e,["toolUsePromptTokensDetails"],m)}return e}function $r(n){const e={},t=o(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function Wr(n){const e={},t=o(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const i=o(n,["resumable"]);i!=null&&s(e,["resumable"],i);const r=o(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function Yr(n){const e={};o(n,["setupComplete"])!=null&&s(e,["setupComplete"],Nr());const i=o(n,["serverContent"]);i!=null&&s(e,["serverContent"],Gr(i));const r=o(n,["toolCall"]);r!=null&&s(e,["toolCall"],Br(r));const l=o(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],Hr(l));const a=o(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],Jr(a));const f=o(n,["goAway"]);f!=null&&s(e,["goAway"],$r(f));const c=o(n,["sessionResumptionUpdate"]);return c!=null&&s(e,["sessionResumptionUpdate"],Wr(c)),e}function Kr(){return{}}function zr(n){const e={},t=o(n,["text"]);t!=null&&s(e,["text"],t);const i=o(n,["weight"]);return i!=null&&s(e,["weight"],i),e}function Xr(n){const e={},t=o(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>zr(r))),s(e,["weightedPrompts"],i)}return e}function Qr(n){const e={},t=o(n,["temperature"]);t!=null&&s(e,["temperature"],t);const i=o(n,["topK"]);i!=null&&s(e,["topK"],i);const r=o(n,["seed"]);r!=null&&s(e,["seed"],r);const l=o(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=o(n,["bpm"]);a!=null&&s(e,["bpm"],a);const f=o(n,["density"]);f!=null&&s(e,["density"],f);const c=o(n,["brightness"]);c!=null&&s(e,["brightness"],c);const u=o(n,["scale"]);u!=null&&s(e,["scale"],u);const d=o(n,["muteBass"]);d!=null&&s(e,["muteBass"],d);const p=o(n,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=o(n,["onlyBassAndDrums"]);m!=null&&s(e,["onlyBassAndDrums"],m);const g=o(n,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function Zr(n){const e={},t=o(n,["clientContent"]);t!=null&&s(e,["clientContent"],Xr(t));const i=o(n,["musicGenerationConfig"]);return i!=null&&s(e,["musicGenerationConfig"],Qr(i)),e}function br(n){const e={},t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);i!=null&&s(e,["mimeType"],i);const r=o(n,["sourceMetadata"]);return r!=null&&s(e,["sourceMetadata"],Zr(r)),e}function Or(n){const e={},t=o(n,["audioChunks"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>br(r))),s(e,["audioChunks"],i)}return e}function jr(n){const e={},t=o(n,["text"]);t!=null&&s(e,["text"],t);const i=o(n,["filteredReason"]);return i!=null&&s(e,["filteredReason"],i),e}function el(n){const e={};o(n,["setupComplete"])!=null&&s(e,["setupComplete"],Kr());const i=o(n,["serverContent"]);i!=null&&s(e,["serverContent"],Or(i));const r=o(n,["filteredPrompt"]);return r!=null&&s(e,["filteredPrompt"],jr(r)),e}function nl(n){const e={},t=o(n,["sessionId"]);return t!=null&&s(e,["sessionId"],t),e}function tl(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ol(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["data"]);i!=null&&s(e,["data"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function il(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["fileUri"]);i!=null&&s(e,["fileUri"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function sl(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],tl(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],ol(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],il(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function rl(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>sl(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function qn(n){const e={},t=o(n,["text"]);t!=null&&s(e,["text"],t);const i=o(n,["finished"]);return i!=null&&s(e,["finished"],i),e}function ll(n){const e={},t=o(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],rl(t));const i=o(n,["turnComplete"]);i!=null&&s(e,["turnComplete"],i);const r=o(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=o(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=o(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const f=o(n,["inputTranscription"]);f!=null&&s(e,["inputTranscription"],qn(f));const c=o(n,["outputTranscription"]);return c!=null&&s(e,["outputTranscription"],qn(c)),e}function al(n){const e={},t=o(n,["args"]);t!=null&&s(e,["args"],t);const i=o(n,["name"]);return i!=null&&s(e,["name"],i),e}function ul(n){const e={},t=o(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>al(r))),s(e,["functionCalls"],i)}return e}function fl(n){const e={},t=o(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function oe(n){const e={},t=o(n,["modality"]);t!=null&&s(e,["modality"],t);const i=o(n,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function cl(n){const e={},t=o(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const i=o(n,["cachedContentTokenCount"]);i!=null&&s(e,["cachedContentTokenCount"],i);const r=o(n,["candidatesTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=o(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=o(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const f=o(n,["totalTokenCount"]);f!=null&&s(e,["totalTokenCount"],f);const c=o(n,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(h=>oe(h))),s(e,["promptTokensDetails"],g)}const u=o(n,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(h=>oe(h))),s(e,["cacheTokensDetails"],g)}const d=o(n,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(h=>oe(h))),s(e,["responseTokensDetails"],g)}const p=o(n,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(h=>oe(h))),s(e,["toolUsePromptTokensDetails"],g)}const m=o(n,["trafficType"]);return m!=null&&s(e,["trafficType"],m),e}function dl(n){const e={},t=o(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function pl(n){const e={},t=o(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const i=o(n,["resumable"]);i!=null&&s(e,["resumable"],i);const r=o(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function ml(n){const e={},t=o(n,["setupComplete"]);t!=null&&s(e,["setupComplete"],nl(t));const i=o(n,["serverContent"]);i!=null&&s(e,["serverContent"],ll(i));const r=o(n,["toolCall"]);r!=null&&s(e,["toolCall"],ul(r));const l=o(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],fl(l));const a=o(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],cl(a));const f=o(n,["goAway"]);f!=null&&s(e,["goAway"],dl(f));const c=o(n,["sessionResumptionUpdate"]);return c!=null&&s(e,["sessionResumptionUpdate"],pl(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gl(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function hl(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function yl(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Tl(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],gl(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],hl(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],yl(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function ce(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Tl(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Cl(n){const e={},t=o(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const i=o(n,["default"]);i!=null&&s(e,["default"],i);const r=o(n,["description"]);r!=null&&s(e,["description"],r);const l=o(n,["enum"]);l!=null&&s(e,["enum"],l);const a=o(n,["example"]);a!=null&&s(e,["example"],a);const f=o(n,["format"]);f!=null&&s(e,["format"],f);const c=o(n,["items"]);c!=null&&s(e,["items"],c);const u=o(n,["maxItems"]);u!=null&&s(e,["maxItems"],u);const d=o(n,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=o(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=o(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=o(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=o(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=o(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const C=o(n,["minimum"]);C!=null&&s(e,["minimum"],C);const v=o(n,["nullable"]);v!=null&&s(e,["nullable"],v);const T=o(n,["pattern"]);T!=null&&s(e,["pattern"],T);const E=o(n,["properties"]);E!=null&&s(e,["properties"],E);const I=o(n,["propertyOrdering"]);I!=null&&s(e,["propertyOrdering"],I);const _=o(n,["required"]);_!=null&&s(e,["required"],_);const M=o(n,["title"]);M!=null&&s(e,["title"],M);const R=o(n,["type"]);return R!=null&&s(e,["type"],R),e}function vl(n){const e={};if(o(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=o(n,["category"]);t!=null&&s(e,["category"],t);const i=o(n,["threshold"]);return i!=null&&s(e,["threshold"],i),e}function El(n){const e={},t=o(n,["behavior"]);t!=null&&s(e,["behavior"],t);const i=o(n,["description"]);i!=null&&s(e,["description"],i);const r=o(n,["name"]);r!=null&&s(e,["name"],r);const l=o(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=o(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=o(n,["response"]);f!=null&&s(e,["response"],f);const c=o(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function Sl(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function _l(n){const e={},t=o(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Sl(t)),o(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Al(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Il(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Al(t)),e}function Ml(){return{}}function Rl(n){const e={},t=o(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function Pl(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>El(u))),s(e,["functionDeclarations"],c)}if(o(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(n,["googleSearch"]);i!=null&&s(e,["googleSearch"],_l(i));const r=o(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Il(r)),o(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(n,["urlContext"])!=null&&s(e,["urlContext"],Ml());const a=o(n,["computerUse"]);a!=null&&s(e,["computerUse"],Rl(a));const f=o(n,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function xl(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Nl(n){const e={},t=o(n,["latitude"]);t!=null&&s(e,["latitude"],t);const i=o(n,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function Dl(n){const e={},t=o(n,["latLng"]);t!=null&&s(e,["latLng"],Nl(t));const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function wl(n){const e={},t=o(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],xl(t));const i=o(n,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],Dl(i)),e}function Ul(n){const e={},t=o(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Ct(n){const e={},t=o(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Ul(t)),e}function kl(n){const e={},t=o(n,["speaker"]);t!=null&&s(e,["speaker"],t);const i=o(n,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],Ct(i)),e}function Ll(n){const e={},t=o(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>kl(r))),s(e,["speakerVoiceConfigs"],i)}return e}function Fl(n){const e={},t=o(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],Ct(t));const i=o(n,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],Ll(i));const r=o(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Vl(n){const e={},t=o(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const i=o(n,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function Gl(n,e,t){const i={},r=o(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],ce(U(r)));const l=o(e,["temperature"]);l!=null&&s(i,["temperature"],l);const a=o(e,["topP"]);a!=null&&s(i,["topP"],a);const f=o(e,["topK"]);f!=null&&s(i,["topK"],f);const c=o(e,["candidateCount"]);c!=null&&s(i,["candidateCount"],c);const u=o(e,["maxOutputTokens"]);u!=null&&s(i,["maxOutputTokens"],u);const d=o(e,["stopSequences"]);d!=null&&s(i,["stopSequences"],d);const p=o(e,["responseLogprobs"]);p!=null&&s(i,["responseLogprobs"],p);const m=o(e,["logprobs"]);m!=null&&s(i,["logprobs"],m);const g=o(e,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const h=o(e,["frequencyPenalty"]);h!=null&&s(i,["frequencyPenalty"],h);const y=o(e,["seed"]);y!=null&&s(i,["seed"],y);const C=o(e,["responseMimeType"]);C!=null&&s(i,["responseMimeType"],C);const v=o(e,["responseSchema"]);v!=null&&s(i,["responseSchema"],Cl(Me(v)));const T=o(e,["responseJsonSchema"]);if(T!=null&&s(i,["responseJsonSchema"],T),o(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(o(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=o(e,["safetySettings"]);if(t!==void 0&&E!=null){let P=E;Array.isArray(P)&&(P=P.map(k=>vl(k))),s(t,["safetySettings"],P)}const I=o(e,["tools"]);if(t!==void 0&&I!=null){let P=Q(I);Array.isArray(P)&&(P=P.map(k=>Pl(X(k)))),s(t,["tools"],P)}const _=o(e,["toolConfig"]);if(t!==void 0&&_!=null&&s(t,["toolConfig"],wl(_)),o(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=o(e,["cachedContent"]);t!==void 0&&M!=null&&s(t,["cachedContent"],V(n,M));const R=o(e,["responseModalities"]);R!=null&&s(i,["responseModalities"],R);const w=o(e,["mediaResolution"]);w!=null&&s(i,["mediaResolution"],w);const A=o(e,["speechConfig"]);if(A!=null&&s(i,["speechConfig"],Fl(Re(A))),o(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=o(e,["thinkingConfig"]);return N!=null&&s(i,["thinkingConfig"],Vl(N)),i}function Bn(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);if(r!=null){let a=L(r);Array.isArray(a)&&(a=a.map(f=>ce(f))),s(t,["contents"],a)}const l=o(e,["config"]);return l!=null&&s(t,["generationConfig"],Gl(n,l,t)),t}function ql(n,e){const t={},i=o(n,["taskType"]);e!==void 0&&i!=null&&s(e,["requests[]","taskType"],i);const r=o(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=o(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),o(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(o(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Bl(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);r!=null&&s(t,["requests[]","content"],tt(n,r));const l=o(e,["config"]);l!=null&&s(t,["config"],ql(l,t));const a=o(e,["model"]);return a!==void 0&&s(t,["requests[]","model"],x(n,a)),t}function Hl(n,e){const t={};if(o(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(o(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=o(n,["numberOfImages"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);const r=o(n,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);const l=o(n,["guidanceScale"]);if(e!==void 0&&l!=null&&s(e,["parameters","guidanceScale"],l),o(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=o(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&s(e,["parameters","safetySetting"],a);const f=o(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const c=o(n,["includeSafetyAttributes"]);e!==void 0&&c!=null&&s(e,["parameters","includeSafetyAttributes"],c);const u=o(n,["includeRaiReason"]);e!==void 0&&u!=null&&s(e,["parameters","includeRaiReason"],u);const d=o(n,["language"]);e!==void 0&&d!=null&&s(e,["parameters","language"],d);const p=o(n,["outputMimeType"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","mimeType"],p);const m=o(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m),o(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const g=o(n,["imageSize"]);if(e!==void 0&&g!=null&&s(e,["parameters","sampleImageSize"],g),o(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Jl(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=o(e,["config"]);return l!=null&&s(t,["config"],Hl(l,t)),t}function $l(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","name"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Wl(n,e,t){const i={},r=o(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=o(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=o(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const f=o(e,["queryBase"]);return t!==void 0&&f!=null&&s(t,["_url","models_url"],st(n,f)),i}function Yl(n,e){const t={},i=o(e,["config"]);return i!=null&&s(t,["config"],Wl(n,i,t)),t}function Kl(n,e){const t={},i=o(n,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);const r=o(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=o(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function zl(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","name"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],Kl(r,t)),t}function Xl(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","name"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ql(n){const e={};if(o(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(o(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(o(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Zl(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);if(r!=null){let a=L(r);Array.isArray(a)&&(a=a.map(f=>ce(f))),s(t,["contents"],a)}const l=o(e,["config"]);return l!=null&&s(t,["config"],Ql(l)),t}function bl(n){const e={};if(o(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=o(n,["imageBytes"]);t!=null&&s(e,["bytesBase64Encoded"],J(t));const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Ol(n,e){const t={},i=o(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i),o(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(o(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=o(n,["durationSeconds"]);if(e!==void 0&&r!=null&&s(e,["parameters","durationSeconds"],r),o(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=o(n,["aspectRatio"]);if(e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l),o(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=o(n,["personGeneration"]);if(e!==void 0&&a!=null&&s(e,["parameters","personGeneration"],a),o(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=o(n,["negativePrompt"]);e!==void 0&&f!=null&&s(e,["parameters","negativePrompt"],f);const c=o(n,["enhancePrompt"]);if(e!==void 0&&c!=null&&s(e,["parameters","enhancePrompt"],c),o(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(o(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(o(n,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(o(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function jl(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=o(e,["image"]);if(l!=null&&s(t,["instances[0]","image"],bl(l)),o(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=o(e,["config"]);return a!=null&&s(t,["config"],Ol(a,t)),t}function ea(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function na(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["data"]);i!=null&&s(e,["data"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ta(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["fileUri"]);i!=null&&s(e,["fileUri"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function oa(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],ea(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],na(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],ta(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function b(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>oa(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function ia(n){const e={},t=o(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const i=o(n,["default"]);i!=null&&s(e,["default"],i);const r=o(n,["description"]);r!=null&&s(e,["description"],r);const l=o(n,["enum"]);l!=null&&s(e,["enum"],l);const a=o(n,["example"]);a!=null&&s(e,["example"],a);const f=o(n,["format"]);f!=null&&s(e,["format"],f);const c=o(n,["items"]);c!=null&&s(e,["items"],c);const u=o(n,["maxItems"]);u!=null&&s(e,["maxItems"],u);const d=o(n,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=o(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=o(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=o(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=o(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=o(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const C=o(n,["minimum"]);C!=null&&s(e,["minimum"],C);const v=o(n,["nullable"]);v!=null&&s(e,["nullable"],v);const T=o(n,["pattern"]);T!=null&&s(e,["pattern"],T);const E=o(n,["properties"]);E!=null&&s(e,["properties"],E);const I=o(n,["propertyOrdering"]);I!=null&&s(e,["propertyOrdering"],I);const _=o(n,["required"]);_!=null&&s(e,["required"],_);const M=o(n,["title"]);M!=null&&s(e,["title"],M);const R=o(n,["type"]);return R!=null&&s(e,["type"],R),e}function sa(n){const e={},t=o(n,["featureSelectionPreference"]);return t!=null&&s(e,["featureSelectionPreference"],t),e}function ra(n){const e={},t=o(n,["method"]);t!=null&&s(e,["method"],t);const i=o(n,["category"]);i!=null&&s(e,["category"],i);const r=o(n,["threshold"]);return r!=null&&s(e,["threshold"],r),e}function la(n){const e={};if(o(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=o(n,["description"]);t!=null&&s(e,["description"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=o(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=o(n,["response"]);a!=null&&s(e,["response"],a);const f=o(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function aa(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function ua(n){const e={},t=o(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],aa(t));const i=o(n,["excludeDomains"]);return i!=null&&s(e,["excludeDomains"],i),e}function fa(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function ca(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],fa(t)),e}function da(n){const e={},t=o(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function pa(n){const e={},t=o(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function ma(n){const e={},t=o(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],pa(t));const i=o(n,["authType"]);i!=null&&s(e,["authType"],i);const r=o(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=o(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=o(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const f=o(n,["oidcConfig"]);return f!=null&&s(e,["oidcConfig"],f),e}function ga(n){const e={},t=o(n,["authConfig"]);return t!=null&&s(e,["authConfig"],ma(t)),e}function ha(){return{}}function ya(n){const e={},t=o(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function vt(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>la(m))),s(e,["functionDeclarations"],p)}const i=o(n,["retrieval"]);i!=null&&s(e,["retrieval"],i);const r=o(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],ua(r));const l=o(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],ca(l));const a=o(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],da(a));const f=o(n,["googleMaps"]);f!=null&&s(e,["googleMaps"],ga(f)),o(n,["urlContext"])!=null&&s(e,["urlContext"],ha());const u=o(n,["computerUse"]);u!=null&&s(e,["computerUse"],ya(u));const d=o(n,["codeExecution"]);return d!=null&&s(e,["codeExecution"],d),e}function Ta(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Ca(n){const e={},t=o(n,["latitude"]);t!=null&&s(e,["latitude"],t);const i=o(n,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function va(n){const e={},t=o(n,["latLng"]);t!=null&&s(e,["latLng"],Ca(t));const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Ea(n){const e={},t=o(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Ta(t));const i=o(n,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],va(i)),e}function Sa(n){const e={},t=o(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function _a(n){const e={},t=o(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Sa(t)),e}function Aa(n){const e={},t=o(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],_a(t)),o(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Ia(n){const e={},t=o(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const i=o(n,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function Ma(n,e,t){const i={},r=o(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],b(U(r)));const l=o(e,["temperature"]);l!=null&&s(i,["temperature"],l);const a=o(e,["topP"]);a!=null&&s(i,["topP"],a);const f=o(e,["topK"]);f!=null&&s(i,["topK"],f);const c=o(e,["candidateCount"]);c!=null&&s(i,["candidateCount"],c);const u=o(e,["maxOutputTokens"]);u!=null&&s(i,["maxOutputTokens"],u);const d=o(e,["stopSequences"]);d!=null&&s(i,["stopSequences"],d);const p=o(e,["responseLogprobs"]);p!=null&&s(i,["responseLogprobs"],p);const m=o(e,["logprobs"]);m!=null&&s(i,["logprobs"],m);const g=o(e,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const h=o(e,["frequencyPenalty"]);h!=null&&s(i,["frequencyPenalty"],h);const y=o(e,["seed"]);y!=null&&s(i,["seed"],y);const C=o(e,["responseMimeType"]);C!=null&&s(i,["responseMimeType"],C);const v=o(e,["responseSchema"]);v!=null&&s(i,["responseSchema"],ia(Me(v)));const T=o(e,["responseJsonSchema"]);T!=null&&s(i,["responseJsonSchema"],T);const E=o(e,["routingConfig"]);E!=null&&s(i,["routingConfig"],E);const I=o(e,["modelSelectionConfig"]);I!=null&&s(i,["modelConfig"],sa(I));const _=o(e,["safetySettings"]);if(t!==void 0&&_!=null){let F=_;Array.isArray(F)&&(F=F.map(pe=>ra(pe))),s(t,["safetySettings"],F)}const M=o(e,["tools"]);if(t!==void 0&&M!=null){let F=Q(M);Array.isArray(F)&&(F=F.map(pe=>vt(X(pe)))),s(t,["tools"],F)}const R=o(e,["toolConfig"]);t!==void 0&&R!=null&&s(t,["toolConfig"],Ea(R));const w=o(e,["labels"]);t!==void 0&&w!=null&&s(t,["labels"],w);const A=o(e,["cachedContent"]);t!==void 0&&A!=null&&s(t,["cachedContent"],V(n,A));const N=o(e,["responseModalities"]);N!=null&&s(i,["responseModalities"],N);const P=o(e,["mediaResolution"]);P!=null&&s(i,["mediaResolution"],P);const k=o(e,["speechConfig"]);k!=null&&s(i,["speechConfig"],Aa(Re(k)));const O=o(e,["audioTimestamp"]);O!=null&&s(i,["audioTimestamp"],O);const $=o(e,["thinkingConfig"]);return $!=null&&s(i,["thinkingConfig"],Ia($)),i}function Hn(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);if(r!=null){let a=L(r);Array.isArray(a)&&(a=a.map(f=>b(f))),s(t,["contents"],a)}const l=o(e,["config"]);return l!=null&&s(t,["generationConfig"],Ma(n,l,t)),t}function Ra(n,e){const t={},i=o(n,["taskType"]);e!==void 0&&i!=null&&s(e,["instances[]","task_type"],i);const r=o(n,["title"]);e!==void 0&&r!=null&&s(e,["instances[]","title"],r);const l=o(n,["outputDimensionality"]);e!==void 0&&l!=null&&s(e,["parameters","outputDimensionality"],l);const a=o(n,["mimeType"]);e!==void 0&&a!=null&&s(e,["instances[]","mimeType"],a);const f=o(n,["autoTruncate"]);return e!==void 0&&f!=null&&s(e,["parameters","autoTruncate"],f),t}function Pa(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);r!=null&&s(t,["instances[]","content"],tt(n,r));const l=o(e,["config"]);return l!=null&&s(t,["config"],Ra(l,t)),t}function xa(n,e){const t={},i=o(n,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);const r=o(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=o(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=o(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const f=o(n,["guidanceScale"]);e!==void 0&&f!=null&&s(e,["parameters","guidanceScale"],f);const c=o(n,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const u=o(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const d=o(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=o(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=o(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=o(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=o(n,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const y=o(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y);const C=o(n,["addWatermark"]);e!==void 0&&C!=null&&s(e,["parameters","addWatermark"],C);const v=o(n,["imageSize"]);e!==void 0&&v!=null&&s(e,["parameters","sampleImageSize"],v);const T=o(n,["enhancePrompt"]);return e!==void 0&&T!=null&&s(e,["parameters","enhancePrompt"],T),t}function Na(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=o(e,["config"]);return l!=null&&s(t,["config"],xa(l,t)),t}function G(n){const e={},t=o(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const i=o(n,["imageBytes"]);i!=null&&s(e,["bytesBase64Encoded"],J(i));const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Da(n){const e={},t=o(n,["maskMode"]);t!=null&&s(e,["maskMode"],t);const i=o(n,["segmentationClasses"]);i!=null&&s(e,["maskClasses"],i);const r=o(n,["maskDilation"]);return r!=null&&s(e,["dilation"],r),e}function wa(n){const e={},t=o(n,["controlType"]);t!=null&&s(e,["controlType"],t);const i=o(n,["enableControlImageComputation"]);return i!=null&&s(e,["computeControl"],i),e}function Ua(n){const e={},t=o(n,["styleDescription"]);return t!=null&&s(e,["styleDescription"],t),e}function ka(n){const e={},t=o(n,["subjectType"]);t!=null&&s(e,["subjectType"],t);const i=o(n,["subjectDescription"]);return i!=null&&s(e,["subjectDescription"],i),e}function La(n){const e={},t=o(n,["referenceImage"]);t!=null&&s(e,["referenceImage"],G(t));const i=o(n,["referenceId"]);i!=null&&s(e,["referenceId"],i);const r=o(n,["referenceType"]);r!=null&&s(e,["referenceType"],r);const l=o(n,["maskImageConfig"]);l!=null&&s(e,["maskImageConfig"],Da(l));const a=o(n,["controlImageConfig"]);a!=null&&s(e,["controlImageConfig"],wa(a));const f=o(n,["styleImageConfig"]);f!=null&&s(e,["styleImageConfig"],Ua(f));const c=o(n,["subjectImageConfig"]);return c!=null&&s(e,["subjectImageConfig"],ka(c)),e}function Fa(n,e){const t={},i=o(n,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);const r=o(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=o(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=o(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const f=o(n,["guidanceScale"]);e!==void 0&&f!=null&&s(e,["parameters","guidanceScale"],f);const c=o(n,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const u=o(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const d=o(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=o(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=o(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=o(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=o(n,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const y=o(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y);const C=o(n,["addWatermark"]);e!==void 0&&C!=null&&s(e,["parameters","addWatermark"],C);const v=o(n,["editMode"]);e!==void 0&&v!=null&&s(e,["parameters","editMode"],v);const T=o(n,["baseSteps"]);return e!==void 0&&T!=null&&s(e,["parameters","editConfig","baseSteps"],T),t}function Va(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=o(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(c=>La(c))),s(t,["instances[0]","referenceImages"],f)}const a=o(e,["config"]);return a!=null&&s(t,["config"],Fa(a,t)),t}function Ga(n,e){const t={},i=o(n,["includeRaiReason"]);e!==void 0&&i!=null&&s(e,["parameters","includeRaiReason"],i);const r=o(n,["outputMimeType"]);e!==void 0&&r!=null&&s(e,["parameters","outputOptions","mimeType"],r);const l=o(n,["outputCompressionQuality"]);e!==void 0&&l!=null&&s(e,["parameters","outputOptions","compressionQuality"],l);const a=o(n,["enhanceInputImage"]);e!==void 0&&a!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],a);const f=o(n,["imagePreservationFactor"]);e!==void 0&&f!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const c=o(n,["numberOfImages"]);e!==void 0&&c!=null&&s(e,["parameters","sampleCount"],c);const u=o(n,["mode"]);return e!==void 0&&u!=null&&s(e,["parameters","mode"],u),t}function qa(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["image"]);r!=null&&s(t,["instances[0]","image"],G(r));const l=o(e,["upscaleFactor"]);l!=null&&s(t,["parameters","upscaleConfig","upscaleFactor"],l);const a=o(e,["config"]);return a!=null&&s(t,["config"],Ga(a,t)),t}function Ba(n){const e={},t=o(n,["productImage"]);return t!=null&&s(e,["image"],G(t)),e}function Ha(n,e){const t={},i=o(n,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);const r=o(n,["personImage"]);e!==void 0&&r!=null&&s(e,["instances[0]","personImage","image"],G(r));const l=o(n,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(f=>Ba(f))),s(e,["instances[0]","productImages"],a)}return t}function Ja(n,e){const t={},i=o(n,["numberOfImages"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);const r=o(n,["baseSteps"]);e!==void 0&&r!=null&&s(e,["parameters","editConfig","baseSteps"],r);const l=o(n,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const a=o(n,["seed"]);e!==void 0&&a!=null&&s(e,["parameters","seed"],a);const f=o(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&s(e,["parameters","safetySetting"],f);const c=o(n,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);const u=o(n,["outputMimeType"]);e!==void 0&&u!=null&&s(e,["parameters","outputOptions","mimeType"],u);const d=o(n,["outputCompressionQuality"]);e!==void 0&&d!=null&&s(e,["parameters","outputOptions","compressionQuality"],d);const p=o(n,["enhancePrompt"]);return e!==void 0&&p!=null&&s(e,["parameters","enhancePrompt"],p),t}function $a(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["source"]);r!=null&&s(t,["config"],Ha(r,t));const l=o(e,["config"]);return l!=null&&s(t,["config"],Ja(l,t)),t}function Wa(n){const e={},t=o(n,["image"]);return t!=null&&s(e,["image"],G(t)),e}function Ya(n,e){const t={},i=o(n,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);const r=o(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],G(r));const l=o(n,["scribbleImage"]);return e!==void 0&&l!=null&&s(e,["instances[0]","scribble"],Wa(l)),t}function Ka(n,e){const t={},i=o(n,["mode"]);e!==void 0&&i!=null&&s(e,["parameters","mode"],i);const r=o(n,["maxPredictions"]);e!==void 0&&r!=null&&s(e,["parameters","maxPredictions"],r);const l=o(n,["confidenceThreshold"]);e!==void 0&&l!=null&&s(e,["parameters","confidenceThreshold"],l);const a=o(n,["maskDilation"]);e!==void 0&&a!=null&&s(e,["parameters","maskDilation"],a);const f=o(n,["binaryColorThreshold"]);return e!==void 0&&f!=null&&s(e,["parameters","binaryColorThreshold"],f),t}function za(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["source"]);r!=null&&s(t,["config"],Ya(r,t));const l=o(e,["config"]);return l!=null&&s(t,["config"],Ka(l,t)),t}function Xa(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","name"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Qa(n,e,t){const i={},r=o(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=o(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=o(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const f=o(e,["queryBase"]);return t!==void 0&&f!=null&&s(t,["_url","models_url"],st(n,f)),i}function Za(n,e){const t={},i=o(e,["config"]);return i!=null&&s(t,["config"],Qa(n,i,t)),t}function ba(n,e){const t={},i=o(n,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);const r=o(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=o(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function Oa(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],ba(r,t)),t}function ja(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","name"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function eu(n,e){const t={},i=o(n,["systemInstruction"]);e!==void 0&&i!=null&&s(e,["systemInstruction"],b(U(i)));const r=o(n,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(f=>vt(f))),s(e,["tools"],a)}const l=o(n,["generationConfig"]);return e!==void 0&&l!=null&&s(e,["generationConfig"],l),t}function nu(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);if(r!=null){let a=L(r);Array.isArray(a)&&(a=a.map(f=>b(f))),s(t,["contents"],a)}const l=o(e,["config"]);return l!=null&&s(t,["config"],eu(l,t)),t}function tu(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);if(r!=null){let a=L(r);Array.isArray(a)&&(a=a.map(f=>b(f))),s(t,["contents"],a)}const l=o(e,["config"]);return l!=null&&s(t,["config"],l),t}function ou(n){const e={},t=o(n,["uri"]);t!=null&&s(e,["gcsUri"],t);const i=o(n,["videoBytes"]);i!=null&&s(e,["bytesBase64Encoded"],J(i));const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function iu(n){const e={},t=o(n,["image"]);t!=null&&s(e,["image"],G(t));const i=o(n,["referenceType"]);return i!=null&&s(e,["referenceType"],i),e}function su(n,e){const t={},i=o(n,["numberOfVideos"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);const r=o(n,["outputGcsUri"]);e!==void 0&&r!=null&&s(e,["parameters","storageUri"],r);const l=o(n,["fps"]);e!==void 0&&l!=null&&s(e,["parameters","fps"],l);const a=o(n,["durationSeconds"]);e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a);const f=o(n,["seed"]);e!==void 0&&f!=null&&s(e,["parameters","seed"],f);const c=o(n,["aspectRatio"]);e!==void 0&&c!=null&&s(e,["parameters","aspectRatio"],c);const u=o(n,["resolution"]);e!==void 0&&u!=null&&s(e,["parameters","resolution"],u);const d=o(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=o(n,["pubsubTopic"]);e!==void 0&&p!=null&&s(e,["parameters","pubsubTopic"],p);const m=o(n,["negativePrompt"]);e!==void 0&&m!=null&&s(e,["parameters","negativePrompt"],m);const g=o(n,["enhancePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","enhancePrompt"],g);const h=o(n,["generateAudio"]);e!==void 0&&h!=null&&s(e,["parameters","generateAudio"],h);const y=o(n,["lastFrame"]);e!==void 0&&y!=null&&s(e,["instances[0]","lastFrame"],G(y));const C=o(n,["referenceImages"]);if(e!==void 0&&C!=null){let T=C;Array.isArray(T)&&(T=T.map(E=>iu(E))),s(e,["instances[0]","referenceImages"],T)}const v=o(n,["compressionQuality"]);return e!==void 0&&v!=null&&s(e,["parameters","compressionQuality"],v),t}function ru(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=o(e,["image"]);l!=null&&s(t,["instances[0]","image"],G(l));const a=o(e,["video"]);a!=null&&s(t,["instances[0]","video"],ou(a));const f=o(e,["config"]);return f!=null&&s(t,["config"],su(f,t)),t}function lu(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function au(n){const e={},t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function uu(n){const e={},t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function fu(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],lu(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],au(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],uu(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function cu(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>fu(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function du(n){const e={},t=o(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function pu(n){const e={},t=o(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const i=o(n,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function mu(n){const e={},t=o(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>pu(r))),s(e,["urlMetadata"],i)}return e}function gu(n){const e={},t=o(n,["content"]);t!=null&&s(e,["content"],cu(t));const i=o(n,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],du(i));const r=o(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=o(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=o(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],mu(a));const f=o(n,["avgLogprobs"]);f!=null&&s(e,["avgLogprobs"],f);const c=o(n,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const u=o(n,["index"]);u!=null&&s(e,["index"],u);const d=o(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=o(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Jn(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>gu(u))),s(e,["candidates"],c)}const r=o(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=o(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=o(n,["responseId"]);a!=null&&s(e,["responseId"],a);const f=o(n,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function hu(n){const e={},t=o(n,["values"]);return t!=null&&s(e,["values"],t),e}function yu(){return{}}function Tu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>hu(a))),s(e,["embeddings"],l)}return o(n,["metadata"])!=null&&s(e,["metadata"],yu()),e}function Cu(n){const e={},t=o(n,["bytesBase64Encoded"]);t!=null&&s(e,["imageBytes"],J(t));const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Et(n){const e={},t=o(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const i=o(n,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);const r=o(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function vu(n){const e={},t=o(n,["_self"]);t!=null&&s(e,["image"],Cu(t));const i=o(n,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);const r=o(n,["_self"]);return r!=null&&s(e,["safetyAttributes"],Et(r)),e}function Eu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>vu(a))),s(e,["generatedImages"],l)}const r=o(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],Et(r)),e}function Su(n){const e={},t=o(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const i=o(n,["createTime"]);i!=null&&s(e,["createTime"],i);const r=o(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Se(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["description"]);r!=null&&s(e,["description"],r);const l=o(n,["version"]);l!=null&&s(e,["version"],l);const a=o(n,["_self"]);a!=null&&s(e,["tunedModelInfo"],Su(a));const f=o(n,["inputTokenLimit"]);f!=null&&s(e,["inputTokenLimit"],f);const c=o(n,["outputTokenLimit"]);c!=null&&s(e,["outputTokenLimit"],c);const u=o(n,["supportedGenerationMethods"]);return u!=null&&s(e,["supportedActions"],u),e}function _u(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["_self"]);if(r!=null){let l=rt(r);Array.isArray(l)&&(l=l.map(a=>Se(a))),s(e,["models"],l)}return e}function Au(){return{}}function Iu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["totalTokens"]);i!=null&&s(e,["totalTokens"],i);const r=o(n,["cachedContentTokenCount"]);return r!=null&&s(e,["cachedContentTokenCount"],r),e}function Mu(n){const e={},t=o(n,["video","uri"]);t!=null&&s(e,["uri"],t);const i=o(n,["video","encodedVideo"]);i!=null&&s(e,["videoBytes"],J(i));const r=o(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function Ru(n){const e={},t=o(n,["_self"]);return t!=null&&s(e,["video"],Mu(t)),e}function Pu(n){const e={},t=o(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Ru(a))),s(e,["generatedVideos"],l)}const i=o(n,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const r=o(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function xu(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["metadata"]);i!=null&&s(e,["metadata"],i);const r=o(n,["done"]);r!=null&&s(e,["done"],r);const l=o(n,["error"]);l!=null&&s(e,["error"],l);const a=o(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],Pu(a)),e}function Nu(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Du(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["data"]);i!=null&&s(e,["data"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function wu(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["fileUri"]);i!=null&&s(e,["fileUri"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Uu(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Nu(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],Du(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],wu(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function ku(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Uu(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Lu(n){const e={},t=o(n,["citations"]);return t!=null&&s(e,["citations"],t),e}function Fu(n){const e={},t=o(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const i=o(n,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function Vu(n){const e={},t=o(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Fu(r))),s(e,["urlMetadata"],i)}return e}function Gu(n){const e={},t=o(n,["content"]);t!=null&&s(e,["content"],ku(t));const i=o(n,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],Lu(i));const r=o(n,["finishMessage"]);r!=null&&s(e,["finishMessage"],r);const l=o(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=o(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Vu(a));const f=o(n,["avgLogprobs"]);f!=null&&s(e,["avgLogprobs"],f);const c=o(n,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const u=o(n,["index"]);u!=null&&s(e,["index"],u);const d=o(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=o(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function $n(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>Gu(d))),s(e,["candidates"],u)}const r=o(n,["createTime"]);r!=null&&s(e,["createTime"],r);const l=o(n,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const a=o(n,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);const f=o(n,["responseId"]);f!=null&&s(e,["responseId"],f);const c=o(n,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function qu(n){const e={},t=o(n,["truncated"]);t!=null&&s(e,["truncated"],t);const i=o(n,["token_count"]);return i!=null&&s(e,["tokenCount"],i),e}function Bu(n){const e={},t=o(n,["values"]);t!=null&&s(e,["values"],t);const i=o(n,["statistics"]);return i!=null&&s(e,["statistics"],qu(i)),e}function Hu(n){const e={},t=o(n,["billableCharacterCount"]);return t!=null&&s(e,["billableCharacterCount"],t),e}function Ju(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>Bu(a))),s(e,["embeddings"],l)}const r=o(n,["metadata"]);return r!=null&&s(e,["metadata"],Hu(r)),e}function St(n){const e={},t=o(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const i=o(n,["bytesBase64Encoded"]);i!=null&&s(e,["imageBytes"],J(i));const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function _t(n){const e={},t=o(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const i=o(n,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);const r=o(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function de(n){const e={},t=o(n,["_self"]);t!=null&&s(e,["image"],St(t));const i=o(n,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);const r=o(n,["_self"]);r!=null&&s(e,["safetyAttributes"],_t(r));const l=o(n,["prompt"]);return l!=null&&s(e,["enhancedPrompt"],l),e}function $u(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>de(a))),s(e,["generatedImages"],l)}const r=o(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],_t(r)),e}function Wu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>de(l))),s(e,["generatedImages"],r)}return e}function Yu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>de(l))),s(e,["generatedImages"],r)}return e}function Ku(n){const e={},t=o(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>de(r))),s(e,["generatedImages"],i)}return e}function zu(n){const e={},t=o(n,["label"]);t!=null&&s(e,["label"],t);const i=o(n,["score"]);return i!=null&&s(e,["score"],i),e}function Xu(n){const e={},t=o(n,["_self"]);t!=null&&s(e,["mask"],St(t));const i=o(n,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>zu(l))),s(e,["labels"],r)}return e}function Qu(n){const e={},t=o(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Xu(r))),s(e,["generatedMasks"],i)}return e}function Zu(n){const e={},t=o(n,["endpoint"]);t!=null&&s(e,["name"],t);const i=o(n,["deployedModelId"]);return i!=null&&s(e,["deployedModelId"],i),e}function bu(n){const e={},t=o(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&s(e,["baseModel"],t);const i=o(n,["createTime"]);i!=null&&s(e,["createTime"],i);const r=o(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Ou(n){const e={},t=o(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const i=o(n,["epoch"]);i!=null&&s(e,["epoch"],i);const r=o(n,["step"]);return r!=null&&s(e,["step"],r),e}function _e(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["description"]);r!=null&&s(e,["description"],r);const l=o(n,["versionId"]);l!=null&&s(e,["version"],l);const a=o(n,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>Zu(m))),s(e,["endpoints"],p)}const f=o(n,["labels"]);f!=null&&s(e,["labels"],f);const c=o(n,["_self"]);c!=null&&s(e,["tunedModelInfo"],bu(c));const u=o(n,["defaultCheckpointId"]);u!=null&&s(e,["defaultCheckpointId"],u);const d=o(n,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>Ou(m))),s(e,["checkpoints"],p)}return e}function ju(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["_self"]);if(r!=null){let l=rt(r);Array.isArray(l)&&(l=l.map(a=>_e(a))),s(e,["models"],l)}return e}function ef(){return{}}function nf(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["totalTokens"]);return i!=null&&s(e,["totalTokens"],i),e}function tf(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["tokensInfo"]);return i!=null&&s(e,["tokensInfo"],i),e}function of(n){const e={},t=o(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const i=o(n,["bytesBase64Encoded"]);i!=null&&s(e,["videoBytes"],J(i));const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function sf(n){const e={},t=o(n,["_self"]);return t!=null&&s(e,["video"],of(t)),e}function rf(n){const e={},t=o(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>sf(a))),s(e,["generatedVideos"],l)}const i=o(n,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const r=o(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function lf(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["metadata"]);i!=null&&s(e,["metadata"],i);const r=o(n,["done"]);r!=null&&s(e,["done"],r);const l=o(n,["error"]);l!=null&&s(e,["error"],l);const a=o(n,["response"]);return a!=null&&s(e,["response"],rf(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const af="Content-Type",uf="X-Server-Timeout",ff="User-Agent",Ae="x-goog-api-client",cf="1.15.0",df=`google-genai-sdk/${cf}`,pf="v1beta1",mf="v1beta",Wn=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class gf{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:pf,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:mf,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[a,f]of Object.entries(e.queryParams))r.searchParams.append(a,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?i[r]=Object.assign(Object.assign({},i[r]),l):l!==void 0&&(i[r]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){const r=new AbortController,l=r.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const a=setTimeout(()=>r.abort(),t.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=l}return t&&t.extraBody!==null&&hf(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await Yn(r),new ye(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await Yn(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return K(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:f,value:c}=yield D(r.read());if(f){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=l.decode(c,{stream:!0});try{const p=JSON.parse(u);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,h=m.code,y=`got status: ${g}. ${JSON.stringify(p)}`;if(h>=400&&h<600)throw new fe({message:y,status:h})}}catch(p){if(p.name==="ApiError")throw p}a+=u;let d=a.match(Wn);for(;d;){const p=d[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield D(new ye(m)),a=a.slice(d[0].length),d=a.match(Wn)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=df+" "+this.clientOptions.userAgentExtra;return e[ff]=t,e[Ae]=t,e[af]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,r]of Object.entries(e.headers))t.append(i,r);e.timeout&&e.timeout>0&&t.append(uf,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);r.sizeBytes=String(a.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:a.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const c=await this.fetchUploadUrl(r,t);return l.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let r={};t!=null&&t.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=await this.request({path:S("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(i=a==null?void 0:a.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Yn(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new fe({message:r,status:t}):new Error(r)}}function hf(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,a){const f=Object.assign({},l);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c)){const u=a[c],d=f[c];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?f[c]=i(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),f[c]=u)}return f}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yf="mcp_used/unknown";let Tf=!1;function At(n){for(const e of n)if(Cf(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Tf}function It(n){var e;const t=(e=n[Ae])!==null&&e!==void 0?e:"";n[Ae]=(t+` ${yf}`).trimStart()}function Cf(n){return n!==null&&typeof n=="object"&&n instanceof xe}function vf(n,e=100){return K(this,arguments,function*(){let i,r=0;for(;r<e;){const l=yield D(n.listTools({cursor:i}));for(const a of l.tools)yield yield D(a),r++;if(!l.nextCursor)break;i=l.nextCursor}})}class xe{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new xe(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const l={},a=[];for(const d of this.mcpClients)try{for(var f=!0,c=(t=void 0,ee(vf(d))),u;u=await c.next(),e=u.done,!e;f=!0){r=u.value,f=!1;const p=r;a.push(p);const m=p.name;if(l[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);l[m]=d}}catch(p){t={error:p}}finally{try{!f&&!e&&(i=c.return)&&await i.call(c)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Qt(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Ef(n,e,t){const i=new Ht;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data);const l=el(r);Object.assign(i,l),e(i)}class Sf{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=If(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let u=()=>{};const d=new Promise(E=>{u=E}),p=e.callbacks,m=function(){u({})},g=this.apiClient,h={onopen:m,onmessage:E=>{Ef(g,p.onmessage,E)},onerror:(t=p==null?void 0:p.onerror)!==null&&t!==void 0?t:function(E){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(E){}},y=this.webSocketFactory.create(c,Af(a),h);y.connect(),await d;const C=x(this.apiClient,e.model),v=yt({model:C}),T=Ee({setup:v});return y.send(JSON.stringify(T)),new _f(y,this.apiClient)}}class _f{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=bs(e),i=Tt(t);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Os(e),i=Ee(t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const t=Ee({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(W.PLAY)}pause(){this.sendPlaybackControl(W.PAUSE)}stop(){this.sendPlaybackControl(W.STOP)}resetContext(){this.sendPlaybackControl(W.RESET_CONTEXT)}close(){this.conn.close()}}function Af(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function If(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mf="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Rf(n,e,t){const i=new Bt;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const a=ml(l);Object.assign(i,a)}else{const a=Yr(l);Object.assign(i,a)}e(i)}class Pf{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new Sf(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,l,a,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&At(e.config.tools)&&It(p);const m=wf(p);if(this.apiClient.isVertexAI())d=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const A=this.apiClient.getApiKey();let N="BidiGenerateContent",P="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",P="access_token"),d=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${N}?${P}=${A}`}let g=()=>{};const h=new Promise(A=>{g=A}),y=e.callbacks,C=function(){var A;(A=y==null?void 0:y.onopen)===null||A===void 0||A.call(y),g({})},v=this.apiClient,T={onopen:C,onmessage:A=>{Rf(v,y.onmessage,A)},onerror:(t=y==null?void 0:y.onerror)!==null&&t!==void 0?t:function(A){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(A){}},E=this.webSocketFactory.create(d,Df(m),T);E.connect(),await h;let I=x(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const A=this.apiClient.getProject(),N=this.apiClient.getLocation();I=`projects/${A}/locations/${N}/`+I}let _={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[le.AUDIO]}:e.config.responseModalities=[le.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const M=(f=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&f!==void 0?f:[],R=[];for(const A of M)if(this.isCallableTool(A)){const N=A;R.push(await N.tool())}else R.push(A);R.length>0&&(e.config.tools=R);const w={model:I,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?_=Mr(this.apiClient,w):_=zs(this.apiClient,w),delete _.config,E.send(JSON.stringify(_)),new Nf(E,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const xf={turnComplete:!0};class Nf{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=L(t.turns),e.isVertexAI()?i=i.map(r=>b(r)):i=i.map(r=>ce(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Mf)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},xf),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:xr(e)}:t={realtimeInput:Zs(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Df(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function wf(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kn=10;function zn(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(z(a)){r=!0;break}if(!r)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function z(n){return"callTool"in n&&typeof n.callTool=="function"}function Uf(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>z(r)))!==null&&i!==void 0?i:!1}function kf(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!z(r)))!==null&&i!==void 0?i:!1}function Xn(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lf extends H{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,l,a,f;const c=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!Uf(t)||zn(t.config))return await this.generateContentInternal(c);if(kf(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,d;const p=L(c.contents),m=(l=(r=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:Kn;let g=0;for(;g<m&&(u=await this.generateContentInternal(c),!(!u.functionCalls||u.functionCalls.length===0));){const h=u.candidates[0].content,y=[];for(const C of(f=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&f!==void 0?f:[])if(z(C)){const T=await C.callTool(u.functionCalls);y.push(...T)}g++,d={role:"user",parts:y},c.contents=L(c.contents),c.contents.push(h),c.contents.push(d),Xn(c.config)&&(p.push(h),p.push(d))}return Xn(c.config)&&(u.automaticFunctionCallingHistory=p),u},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),zn(t.config)){const i=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let l;const a=[];if(i!=null&&i.generatedImages)for(const c of i.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=c==null?void 0:c.safetyAttributes:a.push(c);let f;return l?f={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new ne(B.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(a),a)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>await this.generateVideosInternal(t)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const a=await Promise.all(l.map(async c=>z(c)?await c.tool():c)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(f.config.tools=a,e.config&&e.config.tools&&At(e.config.tools)){const c=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let u=Object.assign({},c);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),It(u),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return f}async initAfcToolsMap(e){var t,i,r;const l=new Map;for(const a of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(z(a)){const f=a,c=await f.tool();for(const u of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!u.name)throw new Error("Function declaration name is required.");if(l.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);l.set(u.name,f)}}return l}async processAfcStream(e){var t,i,r;const l=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:Kn;let a=!1,f=0;const c=await this.initAfcToolsMap(e);return(function(u,d,p){var m,g;return K(this,arguments,function*(){for(var h,y,C,v;f<l;){a&&(f++,a=!1);const _=yield D(u.processParamsMaybeAddMcpUsage(p)),M=yield D(u.generateContentStreamInternal(_)),R=[],w=[];try{for(var T=!0,E=(y=void 0,ee(M)),I;I=yield D(E.next()),h=I.done,!h;T=!0){v=I.value,T=!1;const A=v;if(yield yield D(A),A.candidates&&(!((m=A.candidates[0])===null||m===void 0)&&m.content)){w.push(A.candidates[0].content);for(const N of(g=A.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(f<l&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(N.functionCall.name)){const P=yield D(d.get(N.functionCall.name).callTool([N.functionCall]));R.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(A){y={error:A}}finally{try{!T&&!h&&(C=E.return)&&(yield D(C.call(E)))}finally{if(y)throw y.error}}if(R.length>0){a=!0;const A=new j;A.candidates=[{content:{role:"user",parts:R}}],yield yield D(A);const N=[];N.push(...w),N.push({role:"user",parts:R});const P=L(p.contents).concat(N);p.contents=P}else break}})})(this,c,e)}async generateContentInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Hn(this.apiClient,e);return f=S("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=$n(d),m=new j;return Object.assign(m,p),m})}else{const u=Bn(this.apiClient,e);return f=S("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Jn(d),m=new j;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Hn(this.apiClient,e);return f=S("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.requestStream({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(p){return K(this,arguments,function*(){var m,g,h,y;try{for(var C=!0,v=ee(p),T;T=yield D(v.next()),m=T.done,!m;C=!0){y=T.value,C=!1;const E=y,I=$n(yield D(E.json()));I.sdkHttpResponse={headers:E.headers};const _=new j;Object.assign(_,I),yield yield D(_)}}catch(E){g={error:E}}finally{try{!C&&!m&&(h=v.return)&&(yield D(h.call(v)))}finally{if(g)throw g.error}}})})}else{const u=Bn(this.apiClient,e);return f=S("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.requestStream({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return K(this,arguments,function*(){var m,g,h,y;try{for(var C=!0,v=ee(p),T;T=yield D(v.next()),m=T.done,!m;C=!0){y=T.value,C=!1;const E=y,I=Jn(yield D(E.json()));I.sdkHttpResponse={headers:E.headers};const _=new j;Object.assign(_,I),yield yield D(_)}}catch(E){g={error:E}}finally{try{!C&&!m&&(h=v.return)&&(yield D(h.call(v)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Pa(this.apiClient,e);return f=S("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Ju(d),m=new Tn;return Object.assign(m,p),m})}else{const u=Bl(this.apiClient,e);return f=S("{model}:batchEmbedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Tu(d),m=new Tn;return Object.assign(m,p),m})}}async generateImagesInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Na(this.apiClient,e);return f=S("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=$u(d),m=new Cn;return Object.assign(m,p),m})}else{const u=Jl(this.apiClient,e);return f=S("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Eu(d),m=new Cn;return Object.assign(m,p),m})}}async editImageInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=Va(this.apiClient,e);return l=S("{model}:predict",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>{const u=Wu(c),d=new wt;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=qa(this.apiClient,e);return l=S("{model}:predict",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>{const u=Yu(c),d=new Ut;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=$a(this.apiClient,e);return l=S("{model}:predict",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const u=Ku(c),d=new kt;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=za(this.apiClient,e);return l=S("{model}:predict",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const u=Qu(c),d=new Lt;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Xa(this.apiClient,e);return f=S("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>_e(d))}else{const u=$l(this.apiClient,e);return f=S("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Se(d))}}async listInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Za(this.apiClient,e);return f=S("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=ju(d),m=new vn;return Object.assign(m,p),m})}else{const u=Yl(this.apiClient,e);return f=S("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=_u(d),m=new vn;return Object.assign(m,p),m})}}async update(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Oa(this.apiClient,e);return f=S("{model}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>_e(d))}else{const u=zl(this.apiClient,e);return f=S("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Se(d))}}async delete(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=ja(this.apiClient,e);return f=S("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(()=>{const d=ef(),p=new En;return Object.assign(p,d),p})}else{const u=Xl(this.apiClient,e);return f=S("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(()=>{const d=Au(),p=new En;return Object.assign(p,d),p})}}async countTokens(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=nu(this.apiClient,e);return f=S("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=nf(d),m=new Sn;return Object.assign(m,p),m})}else{const u=Zl(this.apiClient,e);return f=S("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Iu(d),m=new Sn;return Object.assign(m,p),m})}}async computeTokens(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=tu(this.apiClient,e);return l=S("{model}:computeTokens",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>{const u=tf(c),d=new Ft;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=ru(this.apiClient,e);return f=S("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=lf(d),m=new ae;return Object.assign(m,p),m})}else{const u=jl(this.apiClient,e);return f=S("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>{const p=xu(d),m=new ae;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ff(n){const e={},t=o(n,["operationName"]);t!=null&&s(e,["_url","operationName"],t);const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function Vf(n){const e={},t=o(n,["operationName"]);t!=null&&s(e,["_url","operationName"],t);const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function Gf(n){const e={},t=o(n,["operationName"]);t!=null&&s(e,["operationName"],t);const i=o(n,["resourceName"]);i!=null&&s(e,["_url","resourceName"],i);const r=o(n,["config"]);return r!=null&&s(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qf extends H{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Vf(e);return f=S("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a}else{const u=Ff(e);return f=S("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a}}async fetchPredictVideosOperationInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=Gf(e);return l=S("{resourceName}:fetchPredictOperation",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bf(n){const e={},t=o(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Mt(n){const e={},t=o(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Bf(t)),e}function Hf(n){const e={},t=o(n,["speaker"]);t!=null&&s(e,["speaker"],t);const i=o(n,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],Mt(i)),e}function Jf(n){const e={},t=o(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Hf(r))),s(e,["speakerVoiceConfigs"],i)}return e}function $f(n){const e={},t=o(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],Mt(t));const i=o(n,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],Jf(i));const r=o(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Wf(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Yf(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Kf(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function zf(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Wf(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],Yf(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],Kf(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function Xf(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>zf(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Qf(n){const e={},t=o(n,["behavior"]);t!=null&&s(e,["behavior"],t);const i=o(n,["description"]);i!=null&&s(e,["description"],i);const r=o(n,["name"]);r!=null&&s(e,["name"],r);const l=o(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=o(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=o(n,["response"]);f!=null&&s(e,["response"],f);const c=o(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function Zf(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function bf(n){const e={},t=o(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Zf(t)),o(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Of(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function jf(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Of(t)),e}function ec(){return{}}function nc(n){const e={},t=o(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function tc(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>Qf(u))),s(e,["functionDeclarations"],c)}if(o(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(n,["googleSearch"]);i!=null&&s(e,["googleSearch"],bf(i));const r=o(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],jf(r)),o(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(n,["urlContext"])!=null&&s(e,["urlContext"],ec());const a=o(n,["computerUse"]);a!=null&&s(e,["computerUse"],nc(a));const f=o(n,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function oc(n){const e={},t=o(n,["handle"]);if(t!=null&&s(e,["handle"],t),o(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Qn(){return{}}function ic(n){const e={},t=o(n,["disabled"]);t!=null&&s(e,["disabled"],t);const i=o(n,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);const r=o(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=o(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=o(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function sc(n){const e={},t=o(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],ic(t));const i=o(n,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);const r=o(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function rc(n){const e={},t=o(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function lc(n){const e={},t=o(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const i=o(n,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],rc(i)),e}function ac(n){const e={},t=o(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function uc(n,e){const t={},i=o(n,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);const r=o(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=o(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=o(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const f=o(n,["topK"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","topK"],f);const c=o(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const u=o(n,["mediaResolution"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","mediaResolution"],u);const d=o(n,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=o(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],$f(Pe(p)));const m=o(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=o(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],Xf(U(g)));const h=o(n,["tools"]);if(e!==void 0&&h!=null){let _=Q(h);Array.isArray(_)&&(_=_.map(M=>tc(X(M)))),s(e,["setup","tools"],_)}const y=o(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],oc(y));const C=o(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&s(e,["setup","inputAudioTranscription"],Qn());const v=o(n,["outputAudioTranscription"]);e!==void 0&&v!=null&&s(e,["setup","outputAudioTranscription"],Qn());const T=o(n,["realtimeInputConfig"]);e!==void 0&&T!=null&&s(e,["setup","realtimeInputConfig"],sc(T));const E=o(n,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],lc(E));const I=o(n,["proactivity"]);return e!==void 0&&I!=null&&s(e,["setup","proactivity"],ac(I)),t}function fc(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["setup","model"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],uc(r,t)),t}function cc(n,e,t){const i={},r=o(e,["expireTime"]);t!==void 0&&r!=null&&s(t,["expireTime"],r);const l=o(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&s(t,["newSessionExpireTime"],l);const a=o(e,["uses"]);t!==void 0&&a!=null&&s(t,["uses"],a);const f=o(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&s(t,["bidiGenerateContentSetup"],fc(n,f));const c=o(e,["lockAdditionalFields"]);return t!==void 0&&c!=null&&s(t,["fieldMask"],c),i}function dc(n,e){const t={},i=o(e,["config"]);return i!=null&&s(t,["config"],cc(n,i,t)),t}function pc(n){const e={},t=o(n,["name"]);return t!=null&&s(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mc(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function gc(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=mc(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(u=>a.includes(u)?`generationConfig.${u}`:u));const c=[];l&&c.push(l),f.length>0&&c.push(...f),c.length>0?n.fieldMask=c.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class hc extends H{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=dc(this.apiClient,e);l=S("auth_tokens",f._url),a=f._query,delete f.config,delete f._url,delete f._query;const c=gc(f,e.config);return r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>pc(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yc(n){const e={},t=o(n,["name"]);t!=null&&s(e,["_url","name"],t);const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function Tc(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=o(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function Cc(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],Tc(t,e)),e}function vc(n){const e={},t=o(n,["textInput"]);t!=null&&s(e,["textInput"],t);const i=o(n,["output"]);return i!=null&&s(e,["output"],i),e}function Ec(n){const e={};if(o(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(o(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=o(n,["examples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>vc(r))),s(e,["examples","examples"],i)}return e}function Sc(n,e){const t={};if(o(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=o(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&s(e,["displayName"],i),o(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=o(n,["epochCount"]);e!==void 0&&r!=null&&s(e,["tuningTask","hyperparameters","epochCount"],r);const l=o(n,["learningRateMultiplier"]);if(l!=null&&s(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),o(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(o(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(o(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=o(n,["batchSize"]);e!==void 0&&a!=null&&s(e,["tuningTask","hyperparameters","batchSize"],a);const f=o(n,["learningRate"]);return e!==void 0&&f!=null&&s(e,["tuningTask","hyperparameters","learningRate"],f),t}function _c(n){const e={},t=o(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const i=o(n,["preTunedModel"]);i!=null&&s(e,["preTunedModel"],i);const r=o(n,["trainingDataset"]);r!=null&&s(e,["tuningTask","trainingData"],Ec(r));const l=o(n,["config"]);return l!=null&&s(e,["config"],Sc(l,e)),e}function Ac(n){const e={},t=o(n,["name"]);t!=null&&s(e,["_url","name"],t);const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function Ic(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=o(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function Mc(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],Ic(t,e)),e}function Rc(n,e){const t={},i=o(n,["gcsUri"]);e!==void 0&&i!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],i);const r=o(n,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),o(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function Pc(n,e){const t={},i=o(n,["gcsUri"]);i!=null&&s(t,["validationDatasetUri"],i);const r=o(n,["vertexDatasetResource"]);return e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),t}function xc(n,e){const t={},i=o(n,["validationDataset"]);e!==void 0&&i!=null&&s(e,["supervisedTuningSpec"],Pc(i,t));const r=o(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&s(e,["tunedModelDisplayName"],r);const l=o(n,["description"]);e!==void 0&&l!=null&&s(e,["description"],l);const a=o(n,["epochCount"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const f=o(n,["learningRateMultiplier"]);e!==void 0&&f!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const c=o(n,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const u=o(n,["preTunedModelCheckpointId"]);u!=null&&s(t,["preTunedModel","checkpointId"],u);const d=o(n,["adapterSize"]);if(e!==void 0&&d!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),o(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(o(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function Nc(n){const e={},t=o(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const i=o(n,["preTunedModel"]);i!=null&&s(e,["preTunedModel"],i);const r=o(n,["trainingDataset"]);r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],Rc(r,e));const l=o(n,["config"]);return l!=null&&s(e,["config"],xc(l,e)),e}function Dc(n){const e={},t=o(n,["name"]);t!=null&&s(e,["model"],t);const i=o(n,["name"]);return i!=null&&s(e,["endpoint"],i),e}function Rt(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["state"]);r!=null&&s(e,["state"],ot(r));const l=o(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=o(n,["tuningTask","startTime"]);a!=null&&s(e,["startTime"],a);const f=o(n,["tuningTask","completeTime"]);f!=null&&s(e,["endTime"],f);const c=o(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=o(n,["description"]);u!=null&&s(e,["description"],u);const d=o(n,["baseModel"]);d!=null&&s(e,["baseModel"],d);const p=o(n,["_self"]);p!=null&&s(e,["tunedModel"],Dc(p));const m=o(n,["customBaseModel"]);m!=null&&s(e,["customBaseModel"],m);const g=o(n,["experiment"]);g!=null&&s(e,["experiment"],g);const h=o(n,["labels"]);h!=null&&s(e,["labels"],h);const y=o(n,["outputUri"]);y!=null&&s(e,["outputUri"],y);const C=o(n,["pipelineJob"]);C!=null&&s(e,["pipelineJob"],C);const v=o(n,["serviceAccount"]);v!=null&&s(e,["serviceAccount"],v);const T=o(n,["tunedModelDisplayName"]);return T!=null&&s(e,["tunedModelDisplayName"],T),e}function wc(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["tunedModels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Rt(a))),s(e,["tuningJobs"],l)}return e}function Uc(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["metadata"]);r!=null&&s(e,["metadata"],r);const l=o(n,["done"]);l!=null&&s(e,["done"],l);const a=o(n,["error"]);return a!=null&&s(e,["error"],a),e}function kc(n){const e={},t=o(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const i=o(n,["epoch"]);i!=null&&s(e,["epoch"],i);const r=o(n,["step"]);r!=null&&s(e,["step"],r);const l=o(n,["endpoint"]);return l!=null&&s(e,["endpoint"],l),e}function Lc(n){const e={},t=o(n,["model"]);t!=null&&s(e,["model"],t);const i=o(n,["endpoint"]);i!=null&&s(e,["endpoint"],i);const r=o(n,["checkpoints"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>kc(a))),s(e,["checkpoints"],l)}return e}function Ie(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["state"]);r!=null&&s(e,["state"],ot(r));const l=o(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=o(n,["startTime"]);a!=null&&s(e,["startTime"],a);const f=o(n,["endTime"]);f!=null&&s(e,["endTime"],f);const c=o(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=o(n,["error"]);u!=null&&s(e,["error"],u);const d=o(n,["description"]);d!=null&&s(e,["description"],d);const p=o(n,["baseModel"]);p!=null&&s(e,["baseModel"],p);const m=o(n,["tunedModel"]);m!=null&&s(e,["tunedModel"],Lc(m));const g=o(n,["preTunedModel"]);g!=null&&s(e,["preTunedModel"],g);const h=o(n,["supervisedTuningSpec"]);h!=null&&s(e,["supervisedTuningSpec"],h);const y=o(n,["tuningDataStats"]);y!=null&&s(e,["tuningDataStats"],y);const C=o(n,["encryptionSpec"]);C!=null&&s(e,["encryptionSpec"],C);const v=o(n,["partnerModelTuningSpec"]);v!=null&&s(e,["partnerModelTuningSpec"],v);const T=o(n,["customBaseModel"]);T!=null&&s(e,["customBaseModel"],T);const E=o(n,["experiment"]);E!=null&&s(e,["experiment"],E);const I=o(n,["labels"]);I!=null&&s(e,["labels"],I);const _=o(n,["outputUri"]);_!=null&&s(e,["outputUri"],_);const M=o(n,["pipelineJob"]);M!=null&&s(e,["pipelineJob"],M);const R=o(n,["serviceAccount"]);R!=null&&s(e,["serviceAccount"],R);const w=o(n,["tunedModelDisplayName"]);return w!=null&&s(e,["tunedModelDisplayName"],w),e}function Fc(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["tuningJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ie(a))),s(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vc extends H{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new ne(B.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel},r=Object.assign(Object.assign({},t),{preTunedModel:i});return r.baseModel=void 0,await this.tuneInternal(r)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),r=await this.tuneMldevInternal(i);let l="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?l=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(l=r.name.split("/operations/")[0]),{name:l,state:he.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Ac(e);return f=S("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>Ie(d))}else{const u=yc(e);return f=S("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>Rt(d))}}async listInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Mc(e);return f=S("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Fc(d),m=new An;return Object.assign(m,p),m})}else{const u=Cc(e);return f=S("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=wc(d),m=new An;return Object.assign(m,p),m})}}async tuneInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=Nc(e);return l=S("tuningJobs",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>Ie(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_c(e);return l=S("tunedModels",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>Uc(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gc{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const qc=1024*1024*8,Bc=3,Hc=1e3,Jc=2,me="x-goog-upload-status";async function $c(n,e,t){var i,r,l;let a=0,f=0,c=new ye(new Response),u="upload";for(a=n.size;f<a;){const p=Math.min(qc,a-f),m=n.slice(f,f+p);f+p>=a&&(u+=", finalize");let g=0,h=Hc;for(;g<Bc&&(c=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(f),"Content-Length":String(p)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[me]));)g++,await Yc(h),h=h*Jc;if(f+=p,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[me])!=="active")break;if(a<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(c==null?void 0:c.json());if(((l=c==null?void 0:c.headers)===null||l===void 0?void 0:l[me])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function Wc(n){return{size:n.size,type:n.type}}function Yc(n){return new Promise(e=>setTimeout(e,n))}class Kc{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $c(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Wc(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zc{create(e,t,i){return new Xc(e,t,i)}}class Xc{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zn="x-goog-api-key";class Qc{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Zn)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Zn,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zc="gl-node/";class bc{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=Dt(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new Qc(this.apiKey);this.apiClient=new gf({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Zc+"web",uploader:new Kc,downloader:new Gc}),this.models=new Lf(this.apiClient),this.live=new Pf(this.apiClient,r,new zc),this.batches=new oi(this.apiClient),this.chats=new us(this.models,this.apiClient),this.caches=new rs(this.apiClient),this.files=new Ss(this.apiClient),this.operations=new qf(this.apiClient),this.authTokens=new hc(this.apiClient),this.tunings=new Vc(this.apiClient)}}const Oc={x:.3,y:4,width:100-.4-5.6,height:86},jc=async n=>({inlineData:{data:await new Promise((i,r)=>{const l=new FileReader;l.onloadend=()=>{typeof l.result=="string"?i(l.result.split(",")[1]):r(new Error("Failed to read file as string."))},l.onerror=a=>{r(a)},l.readAsDataURL(n)}),mimeType:n.type}}),ed=n=>{if(!n)return[];const e=n.split(`
`).map(i=>i.trim()).filter(Boolean),t=[];for(const i of e)try{if(i.toUpperCase().startsWith("LINE:")){const r=/x1=([\d.]+).*y1=([\d.]+).*x2=([\d.]+).*y2=([\d.]+).*color=([^,]+).*strokeWidth=([\d.]+)/i.exec(i);r&&t.push({type:"line",x1:+r[1],y1:+r[2],x2:+r[3],y2:+r[4],color:r[5].trim(),strokeWidth:+r[6]||.3})}else if(i.toUpperCase().startsWith("RECT:")){const r=/x=([\d.]+).*y=([\d.]+).*width=([\d.]+).*height=([\d.]+).*color=([^,]+).*fillOpacity=([\d.]+)/i.exec(i);r&&t.push({type:"rect",x:+r[1],y:+r[2],width:+r[3],height:+r[4],color:r[5].trim(),fillOpacity:+r[6]||.2})}else if(i.toUpperCase().startsWith("TEXT:")){const r=/x=([\d.]+).*y=([\d.]+).*text=\"([^\"]+)\".*color=([^,]+).*fontSize=([\d.]+)/i.exec(i);r&&t.push({type:"text",x:+r[1],y:+r[2],text:r[3],color:r[4].trim(),fontSize:+r[5]||1.5})}}catch(r){console.error("Failed to parse annotation line:",i,r)}return t},nd=(n,e,t)=>{n.innerHTML="";const i=document.createElementNS("http://www.w3.org/2000/svg","g");i.setAttribute("transform",`translate(${t.x} ${t.y}) scale(${t.width/100} ${t.height/100})`),e.forEach(r=>{let l;r.type==="line"?(l=document.createElementNS("http://www.w3.org/2000/svg","line"),l.setAttribute("x1",String(r.x1)),l.setAttribute("y1",String(r.y1)),l.setAttribute("x2",String(r.x2)),l.setAttribute("y2",String(r.y2)),l.setAttribute("stroke",r.color||"#ffffff"),l.setAttribute("stroke-width",String(r.strokeWidth))):r.type==="rect"?(l=document.createElementNS("http://www.w3.org/2000/svg","rect"),l.setAttribute("x",String(r.x)),l.setAttribute("y",String(r.y)),l.setAttribute("width",String(r.width)),l.setAttribute("height",String(r.height)),l.setAttribute("fill",r.color||"#ffffff"),l.setAttribute("fill-opacity",String(r.fillOpacity))):r.type==="text"&&(l=document.createElementNS("http://www.w3.org/2000/svg","text"),l.setAttribute("x",String(r.x)),l.setAttribute("y",String(r.y)),l.setAttribute("fill",r.color||"#ffffff"),l.setAttribute("font-size",String(r.fontSize)),l.textContent=r.text),l&&i.appendChild(l)}),n.appendChild(i)};document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("analysis-form"),e=document.getElementById("chart-upload"),t=document.getElementById("upload-button"),i=document.getElementById("file-name-display"),r=document.getElementById("user-query-input"),l=document.getElementById("analyze-button"),a=document.getElementById("analysis-history"),f=document.querySelector(".placeholder");let c=null;if(n&&e&&t&&i&&r&&l&&a){const u=()=>{r!=null&&r.value.trim()?l.disabled=!1:l.disabled=!0},d=p=>{p&&p.type.startsWith("image/")?(c=p,i.textContent=p.name,t.classList.add("file-selected")):(c=null,i.textContent="",t.classList.remove("file-selected"),p&&alert("Please select an image file (e.g., PNG, JPG).")),u()};t.addEventListener("click",()=>e.click()),e.addEventListener("change",()=>{const p=e.files?e.files[0]:null;d(p)}),r.addEventListener("input",()=>{u(),r.style.height="auto",r.style.height=`${r.scrollHeight}px`}),a.addEventListener("dragover",p=>{p.preventDefault(),a.classList.add("drag-over")}),a.addEventListener("dragleave",p=>{p.preventDefault(),a.classList.remove("drag-over")}),a.addEventListener("drop",p=>{var g;p.preventDefault(),a.classList.remove("drag-over");const m=(g=p.dataTransfer)!=null&&g.files?p.dataTransfer.files[0]:null;m&&(e.files=p.dataTransfer.files,d(m))}),n.addEventListener("submit",async p=>{p.preventDefault();const m=r.value.trim();if(!m){alert("Please enter a query.");return}f&&(f.style.display="none");const g=c,h=document.createElement("div");h.className="analysis-entry";const y=document.createElement("p");y.className="user-query-text",y.textContent=g?`Your query for "${g.name}": "${m}"`:`Your question: "${m}"`;const C=document.createElement("div");C.className="loader",h.appendChild(y);let v=null;if(g){const T=document.createElement("div");T.className="image-container";const E=document.createElement("img");E.src=URL.createObjectURL(g),E.alt="Uploaded chart screenshot for analysis",v=document.createElementNS("http://www.w3.org/2000/svg","svg"),v.setAttribute("class","annotation-overlay"),v.setAttribute("viewBox","0 0 100 100"),v.setAttribute("preserveAspectRatio","none"),T.appendChild(E),T.appendChild(v),h.appendChild(T)}h.appendChild(C),a.appendChild(h),a.scrollTop=a.scrollHeight,d(null),e.value="",r.value="",r.style.height="auto",u();try{const I=(await(await fetch("https://vigorously-fun-yak.ngrok-free.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).json()).reference,_=new bc({apiKey:"https://vigorously-fun-yak.ngrok-free.app/api-query"});if(g){const M=await jc(g),R=`You are an expert financial market analyst specializing in Wyckoff methodology.

**Reference Knowledge:**
You have access to the following reference knowledge extracted from a book on market structure and Wyckoff methodology:
---
${I}
---

**User's Context:**
The user has provided the following query or context for the analysis:
"${m}"

**Analysis Task & Output Format:**
Your analysis MUST be based on the principles from the provided reference knowledge. Your response MUST follow this exact structure:

1.  **Narrative Analysis:** Provide a detailed, structured narrative explaining the market's story according to Wyckoff principles found in the reference knowledge. Identify accumulation, distribution, or other patterns. Explain your reasoning step by step, applying the rules from the book. Highlight key events, levels, or points (e.g., SC, AR, BC, ST, UT, SOS, SOW). Do not assume information that is not in the reference.

2.  **Key Points Summary:** A mandatory section starting with the exact header "**Key Points:**". This must contain a bulleted list summarizing every critical event, price level, and date you identified in your narrative. This is the primary summary for generating visual annotations.
    **Example for "Key Points:":**
    - Selling Climax (SC) at price 1850.50 on Jan 10
    - Automatic Rally (AR) resistance at price 1880.00 on Jan 11
    - Secondary Test (ST) at price 1855.25 on Jan 12

3.  **Annotation Instructions Separator:** You MUST include a separator line exactly as follows:
--- ANNOTATIONS ---

4.  **Annotation Instructions:** Following the separator, provide a list of visual annotation instructions based on your "Key Points" summary.

**CRITICAL ANNOTATION INSTRUCTIONS:**

1.  **Fixed Plotting Area:** The main plotting area (where price action occurs) is a fixed region. Your coordinates MUST be placed within this area. The plotting area is defined by excluding the following from the image dimensions:
    *   Top: 4% is excluded.
    *   Bottom: 20% is excluded.
    *   Left: 5.6% is excluded.
    *   Right: 0.5% is excluded.

2.  **Coordinate System:** Coordinates are percentages relative to this fixed plotting area.
    *   X-Coordinate (Time): Left edge is x=0, right edge is x=100.
    *   Y-Coordinate (Price): **Top** edge is y=0, **bottom** edge is y=100.

3.  **Formats:** Output ONLY a list of annotation instructions in the specified formats.
    - LINE: x1=10.5, y1=20.0, x2=50.2, y2=20.8, color=#FF0000, strokeWidth=0.3
    - RECT: x=10.0, y=15.5, width=40.0, height=20.0, color=#00FF00, fillOpacity=0.2
    - TEXT: x=15.0, y=18.5, text="Label", color=#FFD600, fontSize=1.5

4.  **Clarity:** Keep text labels concise (e.g., "BC", "AR", "SOS"). Do not include price values in the text labels. Place labels slightly above or below points for clarity.

Begin your full analysis now.`,A=(await _.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[M,{text:R}]}})).text,N="--- ANNOTATIONS ---",P=A.indexOf(N);let k=A,O="";P!==-1?(k=A.substring(0,P).trim(),O=A.substring(P+N.length).trim()):console.warn("Annotation separator not found in the response.");const $=document.createElement("div");if($.className="analysis-text",$.innerHTML=k.replace(/\n/g,"<br>"),v){const F=ed(O);nd(v,F,Oc)}h.replaceChild($,C)}else{const M=`You are an expert financial market analyst specializing in Wyckoff methodology.

**Reference Knowledge:**
You have access to the following reference knowledge extracted from a book on market structure and Wyckoff methodology:
---
${I}
---

**User's Question:**
"${m}"

**Task:**
Based *only* on the provided reference knowledge, please answer the user's question. Provide a clear, structured, and helpful explanation. Do not use any external knowledge or make assumptions beyond the text provided.`,w=(await _.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:M}]}})).text,A=document.createElement("div");A.className="analysis-text",A.innerHTML=w.replace(/\n/g,"<br>"),h.replaceChild(A,C)}}catch(T){console.error("Analysis error:",T);const E=document.createElement("div");E.className="analysis-text",E.innerHTML='<p class="error-message">Failed to get analysis. Please check the console for more details.</p>',T instanceof Error&&(E.innerHTML+=`<p class="error-details">${T.message}</p>`),h.replaceChild(E,C)}finally{a.scrollTop=a.scrollHeight}})}else console.warn("One or more analysis panel elements are not found in the DOM.")});
